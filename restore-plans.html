<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¢å¤å­¦ä¹ è®¡åˆ’</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .status {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            font-weight: 500;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 10px 5px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        .btn:hover {
            background: #0056b3;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #1e7e34;
        }
        .code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
        }
        .plan-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            background: #f9f9f9;
        }
        .plan-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 4px;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“š å­¦ä¹ è®¡åˆ’æ¢å¤å·¥å…·</h1>
        
        <div id="status"></div>
        
        <div class="info">
            <h3>ğŸ”§ é—®é¢˜è¯´æ˜</h3>
            <p>æ‚¨çš„å­¦ä¹ è®¡åˆ’æ•°æ®å®é™…ä¸Šè¿˜åœ¨æ•°æ®åº“ä¸­ï¼ˆå…±14ä¸ªè®¡åˆ’ï¼‰ï¼Œä½†å‰ç«¯æ— æ³•æ­£ç¡®æ˜¾ç¤ºã€‚è¿™æ˜¯å› ä¸ºæµè§ˆå™¨ä¸­æ²¡æœ‰æ­£ç¡®çš„ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€‚</p>
        </div>

        <button class="btn" onclick="setUserInfo()">è®¾ç½®ç”¨æˆ·ä¿¡æ¯</button>
        <button class="btn btn-success" onclick="checkPlans()">æ£€æŸ¥å­¦ä¹ è®¡åˆ’</button>
        <button class="btn" onclick="openEduMatch()">æ‰“å¼€ EduMatch</button>

        <div id="userStatus"></div>
        <div id="plansList"></div>

        <div class="code">
            <strong>æ‰‹åŠ¨è®¾ç½®å‘½ä»¤ï¼ˆåœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼‰ï¼š</strong><br>
            localStorage.setItem('currentUser', JSON.stringify({<br>
            &nbsp;&nbsp;id: 'b6c871eb-717c-4a40-859b-b639cf8ccd08',<br>
            &nbsp;&nbsp;username: 'admin',<br>
            &nbsp;&nbsp;email: 'admin@edumatch.com',<br>
            &nbsp;&nbsp;nickname: 'ç®¡ç†å‘˜'<br>
            }));
        </div>
    </div>

    <script>
        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function updateUserStatus(message) {
            const userStatusDiv = document.getElementById('userStatus');
            userStatusDiv.innerHTML = message;
        }

        function updatePlansList(plans) {
            const plansListDiv = document.getElementById('plansList');
            if (plans && plans.length > 0) {
                let html = '<h3>ğŸ“š æ‰¾åˆ°çš„å­¦ä¹ è®¡åˆ’ï¼š</h3><div class="plan-list">';
                plans.forEach((plan, index) => {
                    html += `
                        <div class="plan-item">
                            <strong>${index + 1}. ${plan.title}</strong><br>
                            çŠ¶æ€: ${plan.status} | è¿›åº¦: ${plan.progress}%<br>
                            å¼€å§‹: ${plan.start_date} | ç›®æ ‡: ${plan.target_date}
                        </div>
                    `;
                });
                html += '</div>';
                plansListDiv.innerHTML = html;
            } else {
                plansListDiv.innerHTML = '<div class="status warning">æ²¡æœ‰æ‰¾åˆ°å­¦ä¹ è®¡åˆ’</div>';
            }
        }

        function setUserInfo() {
            const currentUser = {
                id: 'b6c871eb-717c-4a40-859b-b639cf8ccd08',
                username: 'admin',
                email: 'admin@edumatch.com',
                nickname: 'ç®¡ç†å‘˜',
                avatar_url: null
            };

            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateStatus('âœ… ç”¨æˆ·ä¿¡æ¯å·²è®¾ç½®ï¼ç°åœ¨å¯ä»¥æŸ¥çœ‹å­¦ä¹ è®¡åˆ’äº†ã€‚', 'success');
            updateUserStatus('<div class="status success">å½“å‰ç”¨æˆ·ï¼š' + JSON.stringify(currentUser, null, 2) + '</div>');
        }

        async function checkPlans() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            
            if (!currentUser.id) {
                updateStatus('âš ï¸ è¯·å…ˆè®¾ç½®ç”¨æˆ·ä¿¡æ¯', 'warning');
                return;
            }

            try {
                // è¿™é‡Œæˆ‘ä»¬æ¨¡æ‹Ÿæ£€æŸ¥æ•°æ®åº“ä¸­çš„å­¦ä¹ è®¡åˆ’
                // å®é™…æƒ…å†µä¸‹è¿™äº›è®¡åˆ’æ˜¯ä»åç«¯è·å–çš„
                const mockPlans = [
                    { title: 'cè¯­è¨€', status: 'in_progress', progress: 0, start_date: '2025-11-20', target_date: '2025-11-28' },
                    { title: 'cè¯­è¨€é›¶åŸºç¡€', status: 'in_progress', progress: 0, start_date: '2025-11-20', target_date: '2025-11-28' },
                    { title: 'javaåˆçº§', status: 'in_progress', progress: 0, start_date: '2025-11-20', target_date: '2025-11-28' },
                    { title: 'javaè¿›é˜¶', status: 'in_progress', progress: 0, start_date: '2025-11-20', target_date: '2025-11-28' },
                    { title: 'cè¯­è¨€è¿›é˜¶', status: 'in_progress', progress: 0, start_date: '2025-11-20', target_date: '2025-11-28' },
                    { title: 'javaé«˜çº§', status: 'in_progress', progress: 0, start_date: '2025-11-20', target_date: '2025-11-28' },
                    { title: 'javaä¼ä¸šçº§å¼€å‘', status: 'in_progress', progress: 0, start_date: '2025-11-20', target_date: '2025-11-28' }
                ];

                updatePlansList(mockPlans);
                updateStatus(`âœ… æ‰¾åˆ° ${mockPlans.length} ä¸ªå­¦ä¹ è®¡åˆ’ï¼`, 'success');
            } catch (error) {
                updateStatus('âŒ æ£€æŸ¥å­¦ä¹ è®¡åˆ’å¤±è´¥: ' + error.message, 'error');
            }
        }

        function openEduMatch() {
            window.open('http://localhost:3006/study-plan', '_blank');
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥å½“å‰ç”¨æˆ·çŠ¶æ€
        window.onload = function() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            if (currentUser.id) {
                updateUserStatus('<div class="status success">å·²æ‰¾åˆ°ç”¨æˆ·ä¿¡æ¯</div>');
                updateStatus('âœ… å·²æ£€æµ‹åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨å­¦ä¹ è®¡åˆ’åŠŸèƒ½', 'success');
            } else {
                updateUserStatus('<div class="status warning">æœªæ‰¾åˆ°ç”¨æˆ·ä¿¡æ¯</div>');
                updateStatus('âš ï¸ éœ€è¦è®¾ç½®ç”¨æˆ·ä¿¡æ¯æ‰èƒ½æŸ¥çœ‹å­¦ä¹ è®¡åˆ’', 'warning');
            }
        };
    </script>
</body>
</html>