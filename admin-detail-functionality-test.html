<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†å‘˜è¯¦æƒ…åŠŸèƒ½å®Œæ•´æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .main-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .header h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .header p {
            color: #666;
            font-size: 1.1em;
        }
        .test-section {
            border: 2px solid #f0f0f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            background: #fafafa;
        }
        .test-section h3 {
            color: #333;
            margin-top: 0;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .test-button {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px 10px 5px 0;
            text-decoration: none;
            display: inline-block;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,123,255,0.3);
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,123,255,0.4);
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .warning { color: #ffc107; }
        .info { color: #17a2b8; }
        
        .status-indicator {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            margin: 5px;
            display: inline-block;
        }
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .checklist {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
        }
        .checklist li {
            margin: 8px 0;
            padding: 5px 0;
        }
        .checklist li::before {
            content: "âœ“ ";
            color: #28a745;
            font-weight: bold;
        }
        
        #test-results {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>ğŸ” ç®¡ç†å‘˜æŸ¥çœ‹è¯¦æƒ…åŠŸèƒ½æµ‹è¯•</h1>
            <p>å…¨é¢æµ‹è¯•åå°ç®¡ç†ç³»ç»Ÿä¸­çš„æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®åŠŸèƒ½</p>
        </div>

        <div class="test-section">
            <h3>ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•</h3>
            <p><strong>æµ‹è¯•ç›®æ ‡ï¼š</strong>éªŒè¯æ‰€æœ‰æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®éƒ½èƒ½æ­£ç¡®å·¥ä½œï¼ŒåŒ…æ‹¬ï¼š</p>
            <ul class="checklist">
                <li>å¸–å­è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½</li>
                <li>å­¦ä¹ è®¡åˆ’è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½</li>
                <li>èµ„æºè¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½</li>
                <li>ç”¨æˆ·è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½</li>
            </ul>
            
            <div style="margin-top: 20px;">
                <a href="http://localhost:3010/admin" target="_blank" class="test-button">
                    ğŸš€ æ‰“å¼€åå°ç®¡ç†ç³»ç»Ÿ
                </a>
                <button onclick="startDetailedTest()" class="test-button">
                    ğŸ”§ è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•
                </button>
                <button onclick="clearResults()" class="test-button">
                    ğŸ—‘ï¸ æ¸…é™¤æµ‹è¯•ç»“æœ
                </button>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤è¯´æ˜</h3>
            <div style="background: #e9ecef; padding: 15px; border-radius: 6px; margin: 10px 0;">
                <h4>æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤ï¼š</h4>
                <ol style="line-height: 1.8;">
                    <li>ç‚¹å‡»ä¸Šæ–¹"æ‰“å¼€åå°ç®¡ç†ç³»ç»Ÿ"æŒ‰é’®</li>
                    <li>ç¡®ä¿å·²ç™»å½•ï¼ˆå¦‚æœæœªç™»å½•ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µï¼‰</li>
                    <li>åœ¨åå°ç®¡ç†é¡µé¢ä¸­ï¼Œä¾æ¬¡æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š</li>
                    <ul>
                        <li><strong>å†…å®¹ç®¡ç†</strong>æ ‡ç­¾é¡µ â†’ ç‚¹å‡»ä»»ä¸€å¸–å­çš„çœ¼ç›å›¾æ ‡</li>
                        <li><strong>å­¦ä¹ è®¡åˆ’</strong>æ ‡ç­¾é¡µ â†’ ç‚¹å‡»ä»»ä¸€è®¡åˆ’çš„çœ¼ç›å›¾æ ‡</li>
                        <li><strong>èµ„æºç®¡ç†</strong>æ ‡ç­¾é¡µ â†’ ç‚¹å‡»ä»»ä¸€èµ„æºçš„çœ¼ç›å›¾æ ‡</li>
                        <li><strong>ç”¨æˆ·ç®¡ç†</strong>æ ‡ç­¾é¡µ â†’ ç‚¹å‡»ä»»ä¸€ç”¨æˆ·è¡Œ</li>
                    </ul>
                    <li>éªŒè¯æ¯ä¸ªè¯¦æƒ…é¡µé¢éƒ½èƒ½åœ¨æ–°çª—å£ä¸­æ­£ç¡®æ‰“å¼€</li>
                    <li>ç¡®è®¤è¯¦æƒ…é¡µé¢èƒ½æ­£ç¡®æ˜¾ç¤ºæ•°æ®æˆ–é€‚å½“çš„åŠ è½½/é”™è¯¯çŠ¶æ€</li>
                </ol>
            </div>
        </div>

        <div class="test-section">
            <h3>âš™ï¸ æŠ€æœ¯å®ç°éªŒè¯</h3>
            <p>æ£€æŸ¥ä»¥ä¸‹æŠ€æœ¯å®ç°æ˜¯å¦æ­£ç¡®ï¼š</p>
            <div id="tech-checks">
                <div class="status-indicator status-warning">
                    ç­‰å¾…æµ‹è¯•...
                </div>
            </div>
            
            <div style="margin-top: 15px;">
                <button onclick="checkTechnicalImplementation()" class="test-button">
                    ğŸ” æ£€æŸ¥æŠ€æœ¯å®ç°
                </button>
            </div>
        </div>

        <div id="test-results"></div>
    </div>

    <script>
        // æµ‹è¯•ç»“æœå­˜å‚¨
        let testResults = [];
        
        // æ·»åŠ æµ‹è¯•ç»“æœ
        function addTestResult(testName, status, message, details = null) {
            testResults.push({
                test: testName,
                status: status,
                message: message,
                details: details,
                timestamp: new Date().toLocaleTimeString()
            });
            updateResultsDisplay();
        }
        
        // æ›´æ–°ç»“æœæ˜¾ç¤º
        function updateResultsDisplay() {
            const resultsDiv = document.getElementById('test-results');
            if (testResults.length === 0) {
                resultsDiv.innerHTML = '<p class="info">æš‚æ— æµ‹è¯•ç»“æœ</p>';
                return;
            }
            
            let html = '<h4>ğŸ“Š æµ‹è¯•ç»“æœæ±‡æ€»</h4>';
            
            // ç»Ÿè®¡
            const passed = testResults.filter(r => r.status === 'success').length;
            const failed = testResults.filter(r => r.status === 'error').length;
            const warnings = testResults.filter(r => r.status === 'warning').length;
            
            html += `<div style="margin-bottom: 20px;">
                <span class="status-indicator status-success">âœ… é€šè¿‡: ${passed}</span>
                <span class="status-indicator status-error">âŒ å¤±è´¥: ${failed}</span>
                <span class="status-indicator status-warning">âš ï¸ è­¦å‘Š: ${warnings}</span>
            </div>`;
            
            // è¯¦ç»†ç»“æœ
            testResults.forEach(result => {
                const statusClass = result.status === 'success' ? 'success' : 
                                   result.status === 'error' ? 'error' : 'warning';
                const icon = result.status === 'success' ? 'âœ…' : 
                            result.status === 'error' ? 'âŒ' : 'âš ï¸';
                
                html += `<div style="margin: 10px 0; padding: 10px; border-left: 4px solid ${
                    result.status === 'success' ? '#28a745' : 
                    result.status === 'error' ? '#dc3545' : '#ffc107'
                }; background: #f8f9fa;">
                    <strong>${icon} ${result.test}</strong> 
                    <span class="${statusClass}">${result.message}</span>
                    <small style="color: #666;">(${result.timestamp})</small>
                    ${result.details ? `<div style="margin-top: 5px; font-size: 0.9em; color: #666;">${result.details}</div>` : ''}
                </div>`;
            });
            
            resultsDiv.innerHTML = html;
        }
        
        // æ¸…é™¤ç»“æœ
        function clearResults() {
            testResults = [];
            updateResultsDisplay();
        }
        
        // æ£€æŸ¥æŠ€æœ¯å®ç°
        async function checkTechnicalImplementation() {
            const checksDiv = document.getElementById('tech-checks');
            checksDiv.innerHTML = '<div class="loading"></div> æ­£åœ¨æ£€æŸ¥æŠ€æœ¯å®ç°...';
            
            let checks = [];
            
            // æ£€æŸ¥è·¯ç”±é…ç½®
            try {
                const response = await fetch('http://localhost:3010/post/test-id', { method: 'HEAD' });
                checks.push({
                    name: 'å¸–å­è¯¦æƒ…è·¯ç”±',
                    status: response.status !== 404 ? 'success' : 'error',
                    message: response.status !== 404 ? 'æ­£å¸¸' : 'è·¯ç”±æœªé…ç½®'
                });
            } catch (error) {
                checks.push({
                    name: 'å¸–å­è¯¦æƒ…è·¯ç”±',
                    status: 'error',
                    message: 'ç½‘ç»œé”™è¯¯'
                });
            }
            
            try {
                const response = await fetch('http://localhost:3010/study-plan/test-id', { method: 'HEAD' });
                checks.push({
                    name: 'å­¦ä¹ è®¡åˆ’è¯¦æƒ…è·¯ç”±',
                    status: response.status !== 404 ? 'success' : 'error',
                    message: response.status !== 404 ? 'æ­£å¸¸' : 'è·¯ç”±æœªé…ç½®'
                });
            } catch (error) {
                checks.push({
                    name: 'å­¦ä¹ è®¡åˆ’è¯¦æƒ…è·¯ç”±',
                    status: 'error',
                    message: 'ç½‘ç»œé”™è¯¯'
                });
            }
            
            try {
                const response = await fetch('http://localhost:3010/resource/test-id', { method: 'HEAD' });
                checks.push({
                    name: 'èµ„æºè¯¦æƒ…è·¯ç”±',
                    status: response.status !== 404 ? 'success' : 'error',
                    message: response.status !== 404 ? 'æ­£å¸¸' : 'è·¯ç”±æœªé…ç½®'
                });
            } catch (error) {
                checks.push({
                    name: 'èµ„æºè¯¦æƒ…è·¯ç”±',
                    status: 'error',
                    message: 'ç½‘ç»œé”™è¯¯'
                });
            }
            
            try {
                const response = await fetch('http://localhost:3010/admin', { method: 'HEAD' });
                checks.push({
                    name: 'åå°ç®¡ç†é¡µé¢',
                    status: response.ok ? 'success' : 'error',
                    message: response.ok ? 'æ­£å¸¸' : `é”™è¯¯: ${response.status}`
                });
            } catch (error) {
                checks.push({
                    name: 'åå°ç®¡ç†é¡µé¢',
                    status: 'error',
                    message: 'ç½‘ç»œé”™è¯¯'
                });
            }
            
            // æ˜¾ç¤ºæ£€æŸ¥ç»“æœ
            let html = '';
            checks.forEach(check => {
                const statusClass = check.status === 'success' ? 'status-success' : 
                                   check.status === 'error' ? 'status-error' : 'status-warning';
                html += `<div class="status-indicator ${statusClass}">
                    ${check.name}: ${check.message}
                </div>`;
            });
            
            checksDiv.innerHTML = html;
            
            // æ·»åŠ åˆ°æµ‹è¯•ç»“æœ
            checks.forEach(check => {
                addTestResult(check.name, check.status, check.message);
            });
        }
        
        // å¼€å§‹è¯¦ç»†æµ‹è¯•
        function startDetailedTest() {
            addTestResult('è‡ªåŠ¨åŒ–æµ‹è¯•å¯åŠ¨', 'success', 'å¼€å§‹è¿è¡Œè¯¦ç»†æµ‹è¯•å¥—ä»¶');
            checkTechnicalImplementation();
            
            // æ¨¡æ‹Ÿæ£€æŸ¥æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            setTimeout(() => {
                addTestResult('æŒ‰é’®ç‚¹å‡»äº‹ä»¶', 'warning', 'éœ€è¦æ‰‹åŠ¨éªŒè¯', 'è¯·åœ¨åå°ç®¡ç†é¡µé¢å®é™…æµ‹è¯•æŒ‰é’®åŠŸèƒ½');
            }, 1000);
            
            setTimeout(() => {
                addTestResult('é¡µé¢è·³è½¬åŠŸèƒ½', 'warning', 'éœ€è¦æ‰‹åŠ¨éªŒè¯', 'è¯·ç¡®è®¤è¯¦æƒ…é¡µé¢èƒ½åœ¨æ–°çª—å£ä¸­æ­£ç¡®æ‰“å¼€');
            }, 1500);
            
            setTimeout(() => {
                addTestResult('æ•°æ®åŠ è½½', 'warning', 'éœ€è¦æ‰‹åŠ¨éªŒè¯', 'è¯·ç¡®è®¤è¯¦æƒ…é¡µé¢èƒ½æ­£ç¡®æ˜¾ç¤ºæ•°æ®');
            }, 2000);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ” ç®¡ç†å‘˜æŸ¥çœ‹è¯¦æƒ…åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
            addTestResult('é¡µé¢åŠ è½½', 'success', 'æµ‹è¯•é¡µé¢å·²æ­£ç¡®åŠ è½½');
            
            // è‡ªåŠ¨è¿è¡ŒåŸºç¡€æ£€æŸ¥
            setTimeout(() => {
                checkTechnicalImplementation();
            }, 500);
        });
    </script>
</body>
</html>