<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·è¯¦æƒ…é¡µè¿”å›æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        /* æ¨¡æ‹Ÿ UserDetailAdmin çš„æ ·å¼ */
        div[class*="sidebar"]:not(.admin-sidebar):not([class*="admin"]),
        div[class*="navigation"]:not(.admin-sidebar):not([class*="admin"]),
        aside:not(.admin-sidebar):not([class*="admin"]) {
            display: none !important;
            visibility: hidden !important;
        }
        
        /* ç®¡ç†åå°ä¾§è¾¹æ æ ·å¼ */
        .admin-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 16rem;
            height: 100vh;
            background: #f8fafc;
            border-right: 1px solid #e2e8f0;
            padding: 1rem;
            z-index: 50;
            display: block;
            visibility: visible;
            opacity: 1;
        }
        
        .sidebar-button {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            margin: 0.5rem 0;
            background: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            color: #374151;
            text-decoration: none;
            font-weight: 500;
            visibility: visible;
            opacity: 1;
        }
        
        .sidebar-button:hover {
            background: #f3f4f6;
        }
        
        .main-content {
            margin-left: 16rem;
            padding: 2rem;
        }
        
        .test-section {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 2rem;
        }
        
        .user-detail-page {
            display: none;
        }
        
        .user-list-page {
            display: block;
        }
        
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            cursor: pointer;
            margin: 0.5rem 0;
        }
        
        button:hover {
            background: #2563eb;
        }
        
        .user-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .user-table th,
        .user-table td {
            border: 1px solid #e2e8f0;
            padding: 0.5rem;
            text-align: left;
        }
        
        .user-table th {
            background: #f9fafb;
        }
        
        .user-table tr:hover {
            background: #f9fafb;
        }
    </style>
</head>
<body>
    <!-- ç®¡ç†åå°ä¾§è¾¹æ  -->
    <aside class="admin-sidebar">
        <h3>ç®¡ç†åå°å¯¼èˆª</h3>
        <nav class="sidebar-nav">
            <a href="#" class="sidebar-button" data-page="dashboard">ğŸ“Š ä»ªè¡¨æ¿</a>
            <a href="#" class="sidebar-button" data-page="users">ğŸ‘¥ ç”¨æˆ·ç®¡ç†</a>
            <a href="#" class="sidebar-button" data-page="settings">âš™ï¸ ç³»ç»Ÿè®¾ç½®</a>
            <a href="#" class="sidebar-button" data-page="maintenance">ğŸ”§ ç³»ç»Ÿç»´æŠ¤</a>
        </nav>
    </aside>
    
    <main class="main-content">
        <!-- ç”¨æˆ·ç®¡ç†é¡µé¢ -->
        <div class="user-list-page" id="userListPage">
            <div class="test-section">
                <h1>ğŸ‘¥ ç”¨æˆ·ç®¡ç†é¡µé¢</h1>
                <p>è¿™ä¸ªé¡µé¢æ¨¡æ‹Ÿç”¨æˆ·ç®¡ç†é¡µé¢ï¼Œç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®ä¼šè·³è½¬åˆ°ç”¨æˆ·è¯¦æƒ…é¡µé¢ã€‚</p>
                <button onclick="goToUserDetail()">æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ… (æ¨¡æ‹Ÿ)</button>
            </div>
            
            <h2>ç”¨æˆ·åˆ—è¡¨</h2>
            <table class="user-table">
                <thead>
                    <tr>
                        <th>ç”¨æˆ·å</th>
                        <th>é‚®ç®±</th>
                        <th>çŠ¶æ€</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>testuser1</td>
                        <td>test1@example.com</td>
                        <td>æ­£å¸¸</td>
                        <td><button onclick="goToUserDetail()">æŸ¥çœ‹è¯¦æƒ…</button></td>
                    </tr>
                    <tr>
                        <td>testuser2</td>
                        <td>test2@example.com</td>
                        <td>æ­£å¸¸</td>
                        <td><button onclick="goToUserDetail()">æŸ¥çœ‹è¯¦æƒ…</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- ç”¨æˆ·è¯¦æƒ…é¡µé¢ -->
        <div class="user-detail-page" id="userDetailPage">
            <div class="test-section">
                <h1>ğŸ‘¤ ç”¨æˆ·è¯¦æƒ…é¡µé¢</h1>
                <p>è¿™ä¸ªé¡µé¢æ¨¡æ‹Ÿç”¨æˆ·è¯¦æƒ…é¡µé¢ï¼ŒåŒ…å« UserDetailAdmin.vue ä¸­çš„ CSS éšè—è§„åˆ™ã€‚</p>
                <button onclick="goBackToUserList()">è¿”å›ç”¨æˆ·ç®¡ç†</button>
            </div>
            
            <h2>ç”¨æˆ·è¯¦ç»†ä¿¡æ¯</h2>
            <div style="background: white; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 1rem;">
                <p><strong>ç”¨æˆ·åï¼š</strong> testuser1</p>
                <p><strong>é‚®ç®±ï¼š</strong> test1@example.com</p>
                <p><strong>æ³¨å†Œæ—¶é—´ï¼š</strong> 2025-01-01</p>
                <p><strong>çŠ¶æ€ï¼š</strong> æ­£å¸¸</p>
            </div>
        </div>
        
        <!-- æµ‹è¯•çŠ¶æ€ -->
        <div class="test-section" id="testStatus">
            <h2>ğŸ” æµ‹è¯•çŠ¶æ€</h2>
            <p>ä¾§è¾¹æ çŠ¶æ€æ£€æŸ¥ï¼š</p>
            <ul>
                <li>ä¾§è¾¹æ å…ƒç´ å­˜åœ¨ï¼š<span id="sidebarExists">æ£€æŸ¥ä¸­...</span></li>
                <li>ä¾§è¾¹æ å¯è§æ€§ï¼š<span id="sidebarVisible">æ£€æŸ¥ä¸­...</span></li>
                <li>æŒ‰é’®æ•°é‡ï¼š<span id="buttonCount">æ£€æŸ¥ä¸­...</span></li>
                <li>æ‰€æœ‰æŒ‰é’®å¯è§ï¼š<span id="buttonsVisible">æ£€æŸ¥ä¸­...</span></li>
            </ul>
            <button onclick="checkSidebarStatus()">é‡æ–°æ£€æŸ¥</button>
        </div>
    </main>
    
    <script>
        // åˆ‡æ¢åˆ°ç”¨æˆ·è¯¦æƒ…é¡µé¢
        function goToUserDetail() {
            document.getElementById('userListPage').style.display = 'none';
            document.getElementById('userDetailPage').style.display = 'block';
            
            // æ¨¡æ‹Ÿåº”ç”¨ UserDetailAdmin çš„æ ·å¼
            applyUserDetailStyles();
            
            // å»¶è¿Ÿæ£€æŸ¥ä¾§è¾¹æ çŠ¶æ€
            setTimeout(checkSidebarStatus, 100);
            
            console.log('ğŸ”„ è·³è½¬åˆ°ç”¨æˆ·è¯¦æƒ…é¡µé¢');
        }
        
        // è¿”å›ç”¨æˆ·ç®¡ç†é¡µé¢
        function goBackToUserList() {
            document.getElementById('userDetailPage').style.display = 'none';
            document.getElementById('userListPage').style.display = 'block';
            
            // æ¸…é™¤å¯èƒ½çš„å½±å“æ ·å¼ï¼ˆæ¨¡æ‹Ÿè·¯ç”±å®ˆå«çš„æ“ä½œï¼‰
            clearUserDetailStyles();
            
            // æ¨¡æ‹Ÿè·¯ç”±å®ˆå«çš„ä¾§è¾¹æ ä¿®å¤é€»è¾‘
            setTimeout(() => {
                fixSidebarAfterRouteChange();
                checkSidebarStatus();
            }, 50);
            
            console.log('ğŸ”„ è¿”å›ç”¨æˆ·ç®¡ç†é¡µé¢');
        }
        
        // åº”ç”¨ UserDetailAdmin çš„éšè—æ ·å¼
        function applyUserDetailStyles() {
            const style = document.createElement('style');
            style.id = 'userDetailStyles';
            style.textContent = `
                div[class*="sidebar"]:not(.admin-sidebar):not([class*="admin"]),
                div[class*="navigation"]:not(.admin-sidebar):not([class*="admin"]),
                aside:not(.admin-sidebar):not([class*="admin"]) {
                    display: none !important;
                    visibility: hidden !important;
                }
            `;
            document.head.appendChild(style);
            console.log('ğŸ¨ å·²åº”ç”¨ UserDetailAdmin éšè—æ ·å¼');
        }
        
        // æ¸…é™¤ UserDetailAdmin çš„éšè—æ ·å¼
        function clearUserDetailStyles() {
            const style = document.getElementById('userDetailStyles');
            if (style) {
                style.remove();
                console.log('ğŸ§¹ å·²æ¸…é™¤ UserDetailAdmin éšè—æ ·å¼');
            }
        }
        
        // æ¨¡æ‹Ÿè·¯ç”±å®ˆå«çš„ä¾§è¾¹æ ä¿®å¤é€»è¾‘
        function fixSidebarAfterRouteChange() {
            const sidebar = document.querySelector('.admin-sidebar');
            if (sidebar) {
                // æ¸…é™¤æ‰€æœ‰å¯èƒ½çš„éšè—æ ·å¼
                sidebar.style.removeProperty('display');
                sidebar.style.removeProperty('visibility');
                sidebar.style.removeProperty('opacity');
                sidebar.classList.remove('hidden', 'invisible', 'opacity-0');
                
                // å¼ºåˆ¶è®¾ç½®æ ·å¼
                sidebar.style.setProperty('display', 'block', 'important');
                sidebar.style.setProperty('visibility', 'visible', 'important');
                sidebar.style.setProperty('opacity', '1', 'important');
                
                // ä¿®å¤å¯¼èˆªå®¹å™¨
                const nav = sidebar.querySelector('nav.sidebar-nav');
                if (nav) {
                    nav.style.removeProperty('display');
                    nav.style.removeProperty('visibility');
                    nav.style.removeProperty('opacity');
                    nav.classList.remove('hidden', 'invisible', 'opacity-0');
                    nav.style.setProperty('display', 'flex', 'important');
                    nav.style.setProperty('visibility', 'visible', 'important');
                    nav.style.setProperty('opacity', '1', 'important');
                }
                
                // ä¿®å¤æ‰€æœ‰æŒ‰é’®
                const buttons = sidebar.querySelectorAll('.sidebar-button');
                buttons.forEach((button) => {
                    button.style.removeProperty('display');
                    button.style.removeProperty('visibility');
                    button.style.removeProperty('opacity');
                    button.classList.remove('hidden', 'invisible', 'opacity-0');
                    button.style.setProperty('display', 'flex', 'important');
                    button.style.setProperty('visibility', 'visible', 'important');
                    button.style.setProperty('opacity', '1', 'important');
                });
                
                console.log('ğŸ”§ å·²æ‰§è¡Œä¾§è¾¹æ ä¿®å¤é€»è¾‘');
            }
        }
        
        // æ£€æŸ¥ä¾§è¾¹æ çŠ¶æ€
        function checkSidebarStatus() {
            const sidebar = document.querySelector('.admin-sidebar');
            const buttons = document.querySelectorAll('.sidebar-button');
            
            // æ£€æŸ¥ä¾§è¾¹æ æ˜¯å¦å­˜åœ¨
            document.getElementById('sidebarExists').textContent = sidebar ? 'âœ… æ˜¯' : 'âŒ å¦';
            
            // æ£€æŸ¥ä¾§è¾¹æ æ˜¯å¦å¯è§
            if (sidebar) {
                const computedStyle = window.getComputedStyle(sidebar);
                const isVisible = computedStyle.display !== 'none' && 
                                computedStyle.visibility !== 'hidden' && 
                                parseFloat(computedStyle.opacity) > 0;
                document.getElementById('sidebarVisible').textContent = isVisible ? 'âœ… æ˜¯' : 'âŒ å¦';
            } else {
                document.getElementById('sidebarVisible').textContent = 'âŒ å¦';
            }
            
            // æ£€æŸ¥æŒ‰é’®æ•°é‡
            document.getElementById('buttonCount').textContent = buttons.length;
            
            // æ£€æŸ¥æ‰€æœ‰æŒ‰é’®æ˜¯å¦å¯è§
            let allVisible = true;
            buttons.forEach((button) => {
                const computedStyle = window.getComputedStyle(button);
                if (computedStyle.display === 'none' || 
                    computedStyle.visibility === 'hidden' || 
                    parseFloat(computedStyle.opacity) < 0.1) {
                    allVisible = false;
                }
            });
            document.getElementById('buttonsVisible').textContent = allVisible ? 'âœ… æ˜¯' : 'âŒ å¦';
            
            console.log('ğŸ” ä¾§è¾¹æ çŠ¶æ€æ£€æŸ¥å®Œæˆ');
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ä¾§è¾¹æ çŠ¶æ€
        setTimeout(checkSidebarStatus, 100);
        
        // æ·»åŠ ä¾§è¾¹æ æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.sidebar-button').forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                const page = this.getAttribute('data-page');
                console.log('ğŸ”— ç‚¹å‡»äº†ä¾§è¾¹æ æŒ‰é’®:', page);
                
                // è¿”å›ç”¨æˆ·ç®¡ç†é¡µé¢
                if (page === 'users') {
                    goBackToUserList();
                }
            });
        });
    </script>
</body>
</html>