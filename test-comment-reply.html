<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯„è®ºå›å¤åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .test-step {
            margin-bottom: 15px;
            padding: 10px;
            border-left: 4px solid #007bff;
            background: white;
        }
        .sql-code {
            background: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .info {
            color: #17a2b8;
        }
        .warning {
            color: #ffc107;
        }
        h1, h2 {
            color: #333;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .checklist li:before {
            content: "â–¡ ";
            color: #007bff;
            font-weight: bold;
        }
        .checklist li.checked:before {
            content: "âœ“ ";
            color: #28a745;
        }
    </style>
</head>
<body>
    <h1>ğŸ“ è¯„è®ºå›å¤åŠŸèƒ½æµ‹è¯•æŒ‡å—</h1>
    
    <div class="test-section">
        <h2>ğŸ”§ æ•°æ®åº“è¿ç§»æµ‹è¯•</h2>
        
        <div class="test-step">
            <h3>æ­¥éª¤ 1: æ‰§è¡Œæ•°æ®åº“è¿ç§»</h3>
            <p>åœ¨ Supabase SQL ç¼–è¾‘å™¨ä¸­è¿è¡Œä»¥ä¸‹æ–‡ä»¶ï¼š</p>
            <div class="sql-code">apply-comment-reply-migration.sql</div>
            <p>æˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­ï¼š</p>
            <div class="sql-code">psql -h your-host -U your-user -d your-database -f apply-comment-reply-migration.sql</div>
        </div>
        
        <div class="test-step">
            <h3>æ­¥éª¤ 2: éªŒè¯æ•°æ®åº“ç»“æ„</h3>
            <p>æ£€æŸ¥ post_comments è¡¨æ˜¯å¦åŒ…å« parent_id å­—æ®µï¼š</p>
            <div class="sql-code">
SELECT column_name, data_type, is_nullable 
FROM information_schema.columns 
WHERE table_name = 'post_comments' AND column_name = 'parent_id';
            </div>
            <p class="success">âœ“ å¦‚æœçœ‹åˆ° parent_id å­—æ®µï¼Œè¯´æ˜è¿ç§»æˆåŠŸ</p>
        </div>
        
        <div class="test-step">
            <h3>æ­¥éª¤ 3: æµ‹è¯•æ•°æ®åº“çº¦æŸ</h3>
            <p>å°è¯•æ’å…¥ä¸€æ¡å›å¤è¯„è®ºï¼š</p>
            <div class="sql-code">
-- æ’å…¥é¡¶çº§è¯„è®º
INSERT INTO post_comments (post_id, user_id, content, parent_id) 
VALUES ('your-post-id', 'your-user-id', 'è¿™æ˜¯ä¸€æ¡é¡¶çº§è¯„è®º', NULL);

-- æ’å…¥å›å¤è¯„è®º
INSERT INTO post_comments (post_id, user_id, content, parent_id) 
VALUES ('your-post-id', 'your-user-id', 'è¿™æ˜¯ä¸€æ¡å›å¤è¯„è®º', 'parent-comment-id');
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ¨ å‰ç«¯åŠŸèƒ½æµ‹è¯•</h2>
        
        <h3>åŠŸèƒ½æ£€æŸ¥æ¸…å•ï¼š</h3>
        <ul class="checklist" id="checklist">
            <li>æ‰“å¼€ä»»æ„å¸–å­è¯¦æƒ…é¡µé¢</li>
            <li>æŸ¥çœ‹è¯„è®ºåŒºæ˜¯å¦æ­£å¸¸æ˜¾ç¤º</li>
            <li>æ£€æŸ¥æ¯æ¡è¯„è®ºæ˜¯å¦æœ‰"å›å¤"æŒ‰é’®</li>
            <li>ç‚¹å‡»å›å¤æŒ‰é’®æ˜¯å¦æ˜¾ç¤ºå›å¤è¾“å…¥æ¡†</li>
            <li>è¾“å…¥å›å¤å†…å®¹å¹¶æäº¤</li>
            <li>æ£€æŸ¥å›å¤æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºåœ¨çˆ¶è¯„è®ºä¸‹æ–¹</li>
            <li>æ£€æŸ¥å›å¤çš„ç¼©è¿›æ˜¯å¦æ­£ç¡®</li>
            <li>æµ‹è¯•å¤šå±‚çº§å›å¤ï¼ˆå›å¤çš„å›å¤ï¼‰</li>
            <li>æ£€æŸ¥å›å¤æ•°é‡ç»Ÿè®¡æ˜¯å¦æ­£ç¡®</li>
            <li>æµ‹è¯•æ·±è‰²æ¨¡å¼ä¸‹çš„æ˜¾ç¤ºæ•ˆæœ</li>
            <li>æµ‹è¯•ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥</h2>
        
        <div class="test-step">
            <h3>é—®é¢˜ 1: å›å¤æŒ‰é’®ä¸æ˜¾ç¤º</h3>
            <p>å¯èƒ½åŸå› ï¼š</p>
            <ul>
                <li>CommentComponent ç»„ä»¶æœªæ­£ç¡®æ³¨å†Œ</li>
                <li>Vue ç¼–è¯‘é”™è¯¯</li>
                <li>ç»„ä»¶å¯¼å…¥è·¯å¾„é”™è¯¯</li>
            </ul>
        </div>
        
        <div class="test-step">
            <h3>é—®é¢˜ 2: å›å¤æäº¤å¤±è´¥</h3>
            <p>å¯èƒ½åŸå› ï¼š</p>
            <ul>
                <li>æ•°æ®åº“ RLS ç­–ç•¥é˜»æ­¢æ’å…¥</li>
                <li>ç”¨æˆ·æœªç™»å½•æˆ– token è¿‡æœŸ</li>
                <li>parent_id å­—æ®µä¸å­˜åœ¨</li>
            </ul>
            <p>è§£å†³æ–¹æ¡ˆï¼šè¿è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬å¹¶æ£€æŸ¥ RLS ç­–ç•¥</p>
        </div>
        
        <div class="test-step">
            <h3>é—®é¢˜ 3: å›å¤ä¸æ˜¾ç¤º</h3>
            <p>å¯èƒ½åŸå› ï¼š</p>
            <ul>
                <li>loadComments å‡½æ•°æœªæ­£ç¡®è·å– parent_id</li>
                <li>é€’å½’ç»„ä»¶é€»è¾‘é”™è¯¯</li>
                <li>CSS æ ·å¼å¯¼è‡´éšè—</li>
            </ul>
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š æ€§èƒ½æµ‹è¯•</h2>
        
        <div class="test-step">
            <h3>å¤§é‡å›å¤æµ‹è¯•</h3>
            <p>åˆ›å»ºä¸€ä¸ªæœ‰å¤§é‡å›å¤çš„è¯„è®ºï¼Œæµ‹è¯•ï¼š</p>
            <ul>
                <li>é¡µé¢åŠ è½½é€Ÿåº¦</li>
                <li>æ»šåŠ¨æ€§èƒ½</li>
                <li>å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
            </ul>
        </div>
        
        <div class="test-step">
            <h3>å¹¶å‘æµ‹è¯•</h3>
            <p>å¤šä¸ªç”¨æˆ·åŒæ—¶å›å¤åŒä¸€æ¡è¯„è®ºï¼Œæ£€æŸ¥ï¼š</p>
            <ul>
                <li>æ•°æ®åº“å¹¶å‘å¤„ç†</li>
                <li>å‰ç«¯çŠ¶æ€åŒæ­¥</li>
                <li>å›å¤è®¡æ•°å‡†ç¡®æ€§</li>
            </ul>
        </div>
    </div>
    
    <div class="test-section">
        <h2>âœ… æµ‹è¯•å®Œæˆç¡®è®¤</h2>
        <p>è¯·é€é¡¹æ£€æŸ¥ä»¥ä¸Šæ‰€æœ‰åŠŸèƒ½ï¼Œç¡®ä¿è¯„è®ºå›å¤åŠŸèƒ½å®Œå…¨æ­£å¸¸å·¥ä½œã€‚</p>
        <p class="info">ğŸ’¡ æç¤ºï¼šå¯ä»¥åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ç›‘æ§ç½‘ç»œè¯·æ±‚å’Œé”™è¯¯ä¿¡æ¯ã€‚</p>
    </div>
    
    <script>
        // ç®€å•çš„æ£€æŸ¥æ¸…å•äº¤äº’
        document.addEventListener('DOMContentLoaded', function() {
            const checklistItems = document.querySelectorAll('.checklist li');
            checklistItems.forEach(item => {
                item.addEventListener('click', function() {
                    this.classList.toggle('checked');
                });
            });
        });
    </script>
</body>
</html>