# 🧪 功能测试指南

## 已修复的问题

### ✅ 问题1：资源上传失败
- **原因**：用户ID不匹配
- **修复**：统一使用admin用户的真实ID
- **状态**：已修复

### ✅ 问题2：个人中心不显示资源
- **原因**：查询时使用错误的用户ID
- **修复**：同步获取admin用户ID
- **状态**：已修复

## 测试步骤

### 1. 验证现有资源显示
1. 访问：http://localhost:3000
2. 点击导航栏的"个人中心"
3. 查看是否显示2个现有资源：
   - Vue 3 基础教程 (course)
   - TypeScript 进阶 (article)

### 2. 测试创建新资源
1. 访问：http://localhost:3000/create-resource
2. 填写表单：
   ```
   标题：React 入门教程
   类型：视频课程
   描述：学习React基础
   链接：https://example.com/react
   提供者：EduMatch
   ```
3. 点击"发布资源"
4. 应该看到成功提示并跳转到个人中心
5. 个人中心应该显示3个资源（包括新创建的）

### 3. 验证数据库存储
运行测试脚本验证：
```bash
node test-admin-user.js
```
应该显示admin用户和所有创建的资源。

## 预期结果

### 个人中心应该显示：
```
我的资源 (3个)

┌─────────────────┬──────────────┬─────────┐
│ Vue 3 基础教程   │ course      │ 2025-11-18 │
├─────────────────┼──────────────┼─────────┤
│ TypeScript 进阶  │ article     │ 2025-11-18 │
├─────────────────┼──────────────┼─────────┤
│ React 入门教程   │ video       │ 新创建    │
└─────────────────┴──────────────┴─────────┘
```

### 创建资源流程：
1. 填写表单 → 2. 点击提交 → 3. 显示成功 → 4. 跳转个人中心 → 5. 看到新资源

## 调试信息

### 浏览器控制台应该显示：
```
使用admin用户ID: b6c871eb-717c-4a40-859b-b639cf8ccd08
个人中心使用admin用户ID: b6c871eb-717c-4a40-859b-b639cf8ccd08
资源创建成功: {id: '...', title: '...'}
```

### 如果还有问题：
1. 检查浏览器控制台错误
2. 运行 `node test-admin-user.js` 检查数据库状态
3. 确保Supabase表已创建

## 技术修复细节

### 1. 用户ID统一
```javascript
// 之前：硬编码
const currentUserId = 'demo-user-id'

// 现在：动态获取admin用户ID
const { data: adminUser } = await client
  .from('users')
  .select('id')
  .eq('username', 'admin')
  .single()
```

### 2. 资源创建流程
- 获取admin用户真实ID
- 使用真实ID创建资源
- 成功后跳转到个人中心

### 3. 资源显示流程
- 获取admin用户真实ID
- 查询该ID创建的所有资源
- 按创建时间倒序显示

## 下一步优化
- 实现真实的用户认证系统
- 添加资源编辑和删除功能
- 添加分页和搜索功能
- 优化错误处理和用户反馈