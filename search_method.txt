    
    const response = await fetch('http://localhost:3014/api/coze/chat', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        query: request.query,
        bot_id: this.botId,
        user_id: this.getUserId()
      })
    })
    
    console.log('ğŸ“Š ä»£ç†è¯·æ±‚çŠ¶æ€:', {
      status: response.status,
      ok: response.ok
    })
    
    if (response.ok) {
      const result = await response.json()
      console.log('âœ… ä»£ç†å“åº”æˆåŠŸ:', { success: result.success })
      
      if (result.success && result.data) {
        return this.parseCozeResponse(result.data)
      } else {
        throw new Error(result.error || 'APIè°ƒç”¨å¤±è´¥')
      }
    } else {
      const errorText = await response.text()
      console.error('âŒ ä»£ç†å“åº”é”™è¯¯:', response.status, errorText)
      throw new Error(`ä»£ç†æœåŠ¡å™¨é”™è¯¯: ${response.status}`)
    }
  }