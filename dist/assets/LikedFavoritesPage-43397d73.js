import{c as h,d as V,r as k,q as H,h as $,a as d,b as t,e as r,f as o,l as x,n as B,F as v,k as D,j as S,y as P,o as l,H as y,t as a,_ as z}from"./index-03b3e23e.js";import{useDatabaseStore as J}from"./database-321ae14c.js";import{C as q}from"./clock-4ad22e9b.js";import{D as A}from"./dollar-sign-364db0c8.js";import"./supabase-979167fa.js";/**
 * @license lucide-vue-next v0.420.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=h("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.420.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=h("ExternalLinkIcon",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-vue-next v0.420.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=h("ThumbsUpIcon",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),O={class:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 p-6"},Z={class:"mb-8"},G={class:"text-3xl font-bold text-gray-900 dark:text-white flex items-center"},K={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden mb-6"},Q={class:"flex"},W={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-8 text-center shadow-md"},X={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-full inline-flex items-center justify-center mb-4"},Y={class:"p-4 border-b border-gray-100 dark:border-gray-700"},tt={class:"font-bold text-lg mb-1 line-clamp-1"},et={class:"flex items-center text-sm text-gray-500 dark:text-gray-400"},st={class:"p-4"},rt={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 mb-4"},ot={class:"flex items-start"},at={class:"text-sm text-gray-700 dark:text-gray-300"},dt={class:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4"},lt={class:"flex items-center"},it={class:"bg-gray-100 dark:bg-gray-700 p-2 rounded-lg mr-2"},nt={class:"text-sm font-medium"},gt={class:"flex items-center"},ct={class:"text-sm font-medium"},ut={class:"flex items-center"},mt={class:"bg-gray-100 dark:bg-gray-700 p-2 rounded-lg mr-2"},xt={class:"text-sm font-medium"},bt={class:"bg-blue-100 dark:bg-blue-900/20 rounded-lg p-3 mb-4 flex items-center"},vt=["onClick"],yt={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-8 text-center shadow-md"},kt={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-full inline-flex items-center justify-center mb-4"},pt={class:"p-4 border-b border-gray-100 dark:border-gray-700"},ht={class:"font-bold text-lg mb-1 line-clamp-1"},ft={class:"flex items-center text-sm text-gray-500 dark:text-gray-400"},_t={class:"p-4"},wt={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 mb-4"},Ct={class:"flex items-start"},Ft={class:"text-sm text-gray-700 dark:text-gray-300"},jt={class:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4"},Et={class:"flex items-center"},It={class:"bg-gray-100 dark:bg-gray-700 p-2 rounded-lg mr-2"},Lt={class:"text-sm font-medium"},Mt={class:"flex items-center"},Ut={class:"text-sm font-medium"},Bt={class:"flex items-center"},Dt={class:"bg-gray-100 dark:bg-gray-700 p-2 rounded-lg mr-2"},St={class:"text-sm font-medium"},Pt={class:"bg-red-100 dark:bg-red-900/20 rounded-lg p-3 mb-4 flex items-center"},qt=["onClick"],At=V({__name:"LikedFavoritesPage",setup(Nt){const g=k("liked"),c=k([]),b=k([]),f=()=>{const n=localStorage.getItem("currentUser");if(n)try{return JSON.parse(n).id.toString()}catch(e){console.error("Failed to parse current user:",e)}return"default_user"},T=()=>{f(),(async()=>{try{const e=J(),u=f();if(u){const s=await e.getResources(),m=await e.getFavorites(u);c.value=m.map(i=>{var C,F,j,E,I,L,M,U;return{...i.resources,name:((C=i.resources)==null?void 0:C.title)||"",provider:((F=i.resources)==null?void 0:F.provider)||"",duration:((j=i.resources)==null?void 0:j.duration)||"",rating:((E=i.resources)==null?void 0:E.rating)||0,url:((I=i.resources)==null?void 0:I.url)||"",matchPoints:((L=i.resources)==null?void 0:L.description)||"",type:((M=i.resources)==null?void 0:M.category)||"",interaction:{liked:!0,saved:!0,likesCount:((U=i.resources)==null?void 0:U.likes)||0}}}),b.value=c.value}}catch(e){console.error("加载用户收藏失败:",e),c.value=[],b.value=[]}})()},_=(n,e)=>{n.preventDefault(),window.open(e,"_blank","noopener,noreferrer")},w=n=>{g.value=n};return H(()=>{T()}),(n,e)=>{const u=$("router-link");return l(),d("div",O,[t("div",Z,[t("h1",G,[r(o(y),{class:"h-8 w-8 mr-3 text-red-500"}),e[2]||(e[2]=x(" 点赞收藏 ",-1))]),e[3]||(e[3]=t("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"查看你点赞和收藏的学习资源",-1))]),t("div",K,[t("div",Q,[t("button",{onClick:e[0]||(e[0]=s=>w("liked")),class:B(`flex-1 py-4 px-6 flex items-center justify-center transition-colors ${g.value==="liked"?"bg-blue-600 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`)},[r(o(p),{class:"h-5 w-5 mr-2"}),e[4]||(e[4]=t("span",{class:"font-medium"},"我的点赞",-1))],2),t("button",{onClick:e[1]||(e[1]=s=>w("favorites")),class:B(`flex-1 py-4 px-6 flex items-center justify-center transition-colors ${g.value==="favorites"?"bg-red-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`)},[r(o(y),{class:"h-5 w-5 mr-2"}),e[5]||(e[5]=t("span",{class:"font-medium"},"我的收藏",-1))],2)])]),(l(),d("div",{key:g.value,class:"space-y-6"},[g.value==="liked"?(l(),d(v,{key:0},[c.value.length===0?(l(),d("div",W,[t("div",X,[r(o(p),{class:"h-8 w-8 text-gray-400"})]),e[7]||(e[7]=t("h3",{class:"text-lg font-medium mb-2"},"暂无点赞内容",-1)),e[8]||(e[8]=t("p",{class:"text-gray-500 dark:text-gray-400 mb-6"},"浏览教育资源并点赞，这里将显示你喜欢的内容",-1)),r(u,{to:"/search",class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors inline-block"},{default:D(()=>[...e[6]||(e[6]=[x(" 去搜索资源 ",-1)])]),_:1})])):S("",!0),(l(!0),d(v,null,P(c.value,s=>(l(),d("div",{key:s.id,class:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md border border-gray-100 dark:border-gray-700 transition-transform duration-200 hover:scale-105"},[t("div",Y,[t("h3",tt,a(s.name),1),t("div",et,[t("span",null,a(s.provider),1)])]),t("div",st,[t("div",rt,[t("div",ot,[r(o(N),{class:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),t("p",at,a(s.matchPoints),1)])]),t("div",dt,[t("div",lt,[t("div",it,[r(o(q),{class:"h-4 w-4 text-gray-500 dark:text-gray-400"})]),t("div",null,[e[9]||(e[9]=t("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"学习时长",-1)),t("div",nt,a(s.duration),1)])]),t("div",gt,[e[11]||(e[11]=t("div",{class:"bg-gray-100 dark:bg-gray-700 p-2 rounded-lg mr-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-yellow-500"},[t("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})])],-1)),t("div",null,[e[10]||(e[10]=t("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"用户评分",-1)),t("div",ct,a(s.rating)+"/10",1)])]),t("div",ut,[t("div",mt,[r(o(A),{class:"h-4 w-4 text-green-500"})]),t("div",null,[e[12]||(e[12]=t("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"资源类型",-1)),t("div",xt,a(s.type),1)])])]),t("div",bt,[r(o(p),{class:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-2"}),e[13]||(e[13]=t("p",{class:"text-sm text-blue-700 dark:text-blue-300"},"你已点赞此资源",-1))]),t("button",{onClick:m=>_(m,s.url),class:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all duration-200 hover:scale-105 active:scale-95"},[e[14]||(e[14]=x(" 立即学习 ",-1)),r(o(R),{class:"h-4 w-4 ml-2"})],8,vt)])]))),128))],64)):(l(),d(v,{key:1},[b.value.length===0?(l(),d("div",yt,[t("div",kt,[r(o(y),{class:"h-8 w-8 text-gray-400"})]),e[16]||(e[16]=t("h3",{class:"text-lg font-medium mb-2"},"暂无收藏内容",-1)),e[17]||(e[17]=t("p",{class:"text-gray-500 dark:text-gray-400 mb-6"},"浏览教育资源并收藏，这里将显示你保存的内容",-1)),r(u,{to:"/search",class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors inline-block"},{default:D(()=>[...e[15]||(e[15]=[x(" 去搜索资源 ",-1)])]),_:1})])):S("",!0),(l(!0),d(v,null,P(b.value,s=>(l(),d("div",{key:s.id,class:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md border border-gray-100 dark:border-gray-700 transition-transform duration-200 hover:scale-105"},[t("div",pt,[t("h3",ht,a(s.name),1),t("div",ft,[t("span",null,a(s.provider),1)])]),t("div",_t,[t("div",wt,[t("div",Ct,[r(o(N),{class:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),t("p",Ft,a(s.matchPoints),1)])]),t("div",jt,[t("div",Et,[t("div",It,[r(o(q),{class:"h-4 w-4 text-gray-500 dark:text-gray-400"})]),t("div",null,[e[18]||(e[18]=t("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"学习时长",-1)),t("div",Lt,a(s.duration),1)])]),t("div",Mt,[e[20]||(e[20]=t("div",{class:"bg-gray-100 dark:bg-gray-700 p-2 rounded-lg mr-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-yellow-500"},[t("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})])],-1)),t("div",null,[e[19]||(e[19]=t("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"用户评分",-1)),t("div",Ut,a(s.rating)+"/10",1)])]),t("div",Bt,[t("div",Dt,[r(o(A),{class:"h-4 w-4 text-green-500"})]),t("div",null,[e[21]||(e[21]=t("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"资源类型",-1)),t("div",St,a(s.type),1)])])]),t("div",Pt,[r(o(y),{class:"h-5 w-5 text-red-600 dark:text-red-400 mr-2"}),e[22]||(e[22]=t("p",{class:"text-sm text-red-700 dark:text-red-300"},"你已收藏此资源",-1))]),t("button",{onClick:m=>_(m,s.url),class:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all duration-200 hover:scale-105 active:scale-95"},[e[23]||(e[23]=x(" 立即学习 ",-1)),r(o(R),{class:"h-4 w-4 ml-2"})],8,qt)])]))),128))],64))]))])}}}),zt=z(At,[["__file","E:/前端初级课程/program/EduMatch/src/views/LikedFavoritesPage.vue"]]);export{zt as default};
