import{d as Be,s as $e,r as c,o as Ue,D as Ee,b as n,e as i,f as t,h as ke,w as $,v as Z,k as q,t as d,j as x,n as C,F as S,i as V,l as ae,y as Oe,q as U,z as Q,_ as Ae}from"./index-9cc4628e.js";import{useDatabaseStore as Te}from"./database-830f62cb.js";import"./supabase-7d3cd435.js";const De={class:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 p-6"},Fe={class:"grid grid-cols-1 lg:grid-cols-4 gap-6 lg:gap-8"},Re={class:"lg:col-span-1 space-y-6 lg:sticky lg:top-0 lg:pt-6 lg:self-start lg:h-fit"},Xe={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md"},Ze={class:"flex space-x-2"},Ge={class:"relative flex-1"},Ke=["disabled"],He={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Ye={key:1},qe={key:0,class:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},Qe={class:"flex items-center justify-between"},We={class:"text-sm text-blue-700 dark:text-blue-300"},et={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md"},tt={key:0,class:"flex flex-wrap gap-2"},rt=["onClick"],ot={class:"ml-1 text-xs opacity-70"},st={key:1,class:"text-gray-500 dark:text-gray-400 text-sm"},lt={class:"lg:col-span-3"},at={key:0,class:"flex justify-center items-center py-12"},nt={key:1,class:"text-center py-12"},it={class:"text-gray-500 dark:text-gray-400 mb-4"},dt={key:2,class:"text-center py-12"},ut={key:3,class:"text-center py-12"},ct={key:4,class:"space-y-6"},gt=["onClick"],vt={class:"p-6"},yt={class:"flex items-start justify-between mb-4"},pt={class:"flex-1"},xt={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"},kt={class:"text-gray-600 dark:text-gray-400 line-clamp-3"},ft={class:"ml-4 flex space-x-3"},bt=["onClick","disabled"],mt={class:"text-sm font-medium"},ht=["onClick","disabled"],wt={class:"text-sm font-medium"},_t={class:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400"},Ct={class:"flex items-center space-x-4"},It={class:"flex items-center"},Mt={class:"flex items-center"},jt={key:0,class:"flex flex-wrap gap-2 mt-3"},St={key:5,class:"mt-8 flex justify-center items-center"},zt={key:0,class:"flex items-center space-x-2"},Pt=["disabled"],Vt={key:1,class:"px-2 text-gray-500 dark:text-gray-400"},Jt=["onClick"],Nt={key:2,class:"px-2 text-gray-500 dark:text-gray-400"},Lt=["disabled"],Bt={class:"ml-4 text-sm text-gray-500 dark:text-gray-400"},$t={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Ut={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Et={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Ot={class:"mt-2"},At={key:0,class:"mt-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800"},Tt={class:"flex items-start justify-between"},Dt={class:"flex-1"},Ft={class:"text-sm text-gray-700 dark:text-gray-300"},Rt={class:"font-medium"},Xt={key:0,class:"ml-2 px-2 py-0.5 bg-purple-200 dark:bg-purple-800 text-purple-700 dark:text-purple-300 rounded-full text-xs"},Zt={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Gt={class:"space-y-2"},Kt={class:"flex flex-wrap gap-2"},Ht=["onClick"],Yt={class:"flex space-x-2"},qt={class:"flex justify-end space-x-3 pt-4"},Qt=["disabled"],Wt={key:0,class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},er={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},tr={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden"},rr={class:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700"},or={class:"p-6 overflow-y-auto max-h-[60vh]"},sr={key:0,class:"text-center py-8"},lr={key:1,class:"text-center py-8"},ar={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},nr=["onClick"],ir={class:"flex items-start justify-between mb-3"},dr={class:"flex-1"},ur={class:"flex items-center gap-2 mb-2"},cr={class:"font-semibold text-gray-900 dark:text-white"},gr={class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},vr={class:"flex flex-wrap items-center gap-3 text-xs text-gray-500 dark:text-gray-400"},yr={key:0,class:"flex items-center"},pr={key:1,class:"flex items-center"},xr={key:2,class:"flex items-center"},kr={key:3,class:"flex flex-col items-center space-y-4 mt-6"},fr={class:"flex justify-center items-center space-x-2"},br=["disabled"],mr={class:"flex space-x-1"},hr=["onClick"],wr=["disabled"],_r={class:"flex items-center justify-center space-x-3"},Cr={class:"flex items-center space-x-2"},Ir=["max"],Mr=["disabled"],jr={class:"text-sm text-gray-400 dark:text-gray-500"},Sr={key:4,class:"text-center text-sm text-gray-500 dark:text-gray-400 mt-4"},zr={class:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700"},Pr=Be({__name:"CommunityPage",setup(Vr){const ne=$e(),w=c([]),J=c([]),G=c([]),M=c(""),E=c(!1),j=c(!1),N=c(!0),O=c(!1),A=c(""),W=c(!1),L=c(!1),B=c(!1),K=c(!1),H=c(!1),g=c({title:"",content:"",category:"",tags:[]}),T=c(""),m=c([]),_=c(null),ee=c(!1),b=c(1),D=c(6),k=c(0),Y=c([]),I=c(""),h=Te(),y=c(1),te=c(10),p=c(0),re=c([]),z=()=>{const r=j.value?J.value:w.value;p.value=Math.ceil(r.length/te.value);const e=(y.value-1)*te.value,o=e+te.value;re.value=r.slice(e,o),y.value>p.value&&p.value>0&&(y.value=p.value,z()),console.log(`ğŸ“„ åˆ†é¡µæ›´æ–°: ç¬¬${y.value}é¡µ/å…±${p.value}é¡µ, æ˜¾ç¤º${re.value.length}ä¸ªå¸–å­`)},F=r=>{r>=1&&r<=p.value&&(y.value=r,z(),window.scrollTo({top:0,behavior:"smooth"}))},fe=()=>{F(y.value-1)},be=()=>{F(y.value+1)},P=()=>{const r=[];if(p.value<=5)for(let o=1;o<=p.value;o++)r.push(o);else if(y.value<=3)for(let o=1;o<=5;o++)r.push(o);else if(y.value>=p.value-2)for(let o=p.value-4;o<=p.value;o++)r.push(o);else for(let o=y.value-2;o<=y.value+2;o++)r.push(o);return r},me=()=>{M.value.trim()||R()},R=()=>{M.value="",j.value=!1,J.value=[],E.value=!1,y.value=1,z()},ie=async()=>{const r=M.value.trim();if(!r){R();return}E.value=!0,j.value=!0;try{w.value.length===0&&await oe();const e=r.toLowerCase(),o=w.value.filter(l=>!!(l.title&&l.title.toLowerCase().includes(e)||l.content&&l.content.toLowerCase().includes(e)||l.category&&l.category.toLowerCase().includes(e)||l.author&&l.author.toLowerCase().includes(e)||l.tags&&Array.isArray(l.tags)&&l.tags.some(s=>typeof s=="string"&&s.toLowerCase().includes(e))));J.value=o,y.value=1,z()}catch{}finally{E.value=!1}},he=r=>{console.log("ğŸ“– æŸ¥çœ‹å¸–å­è¯¦æƒ…ï¼ŒID:",r),ne.push(`/post/${r}`)},we=r=>{const e=new Date(r),l=new Date().getTime()-e.getTime(),a=Math.floor(l/(1e3*60*60*24));return a===0?"ä»Šå¤©":a===1?"æ˜¨å¤©":a<7?`${a}å¤©å‰`:a<30?`${Math.floor(a/7)}å‘¨å‰`:e.toLocaleDateString("zh-CN")},_e=async r=>{if(!K.value){K.value=!0;try{let e=null;const o=localStorage.getItem("currentUser");if(o)try{const a=JSON.parse(o);a.id&&(e=a.id)}catch(a){console.error("è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:",a)}if(!e){alert("è¯·å…ˆç™»å½•åå†ç‚¹èµ");return}let l=!1;try{const{createClient:a}=await Q(()=>import("./index-31c5edd2.js"),[]),s="https://aonlahundnkxuyxfsmcy.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbmxhaHVuZG5reHV5eGZzbWN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNjYwNTUsImV4cCI6MjA3ODY0MjA1NX0.IQswPG1NkJKht83isjWJk5nzuhymzETAf81_71kXaVE";if(s&&u){const f=a(s,u);if(r.is_liked){const{error:v}=await f.from("post_likes").delete().eq("user_id",e).eq("post_id",r.id);if(v)throw v;r.is_liked=!1,r.like_count=Math.max((r.like_count||0)-1,0),console.log("âœ… æ•°æ®åº“å–æ¶ˆç‚¹èµæˆåŠŸ")}else{const{error:v}=await f.from("post_likes").insert([{user_id:e,post_id:r.id}]);if(v)throw v;r.is_liked=!0,r.like_count=(r.like_count||0)+1,console.log("âœ… æ•°æ®åº“æ·»åŠ ç‚¹èµæˆåŠŸ")}l=!0}}catch(a){console.warn("âš ï¸ æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨:",a.message),l=!1}if(!l){const a=`edumatch_likes_${e}`;let s=JSON.parse(localStorage.getItem(a)||"[]");r.is_liked?(s=s.filter(u=>u.post_id!==r.id),r.is_liked=!1,r.like_count=Math.max((r.like_count||0)-1,0),console.log("âœ… æœ¬åœ°å–æ¶ˆç‚¹èµæˆåŠŸ")):(s.push({post_id:r.id,user_id:e,timestamp:Date.now()}),r.is_liked=!0,r.like_count=(r.like_count||0)+1,console.log("âœ… æœ¬åœ°æ·»åŠ ç‚¹èµæˆåŠŸ")),localStorage.setItem(a,JSON.stringify(s))}await ce(e)}catch(e){console.error("ç‚¹èµæ“ä½œå¤±è´¥:",e),alert("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{K.value=!1}}},Ce=async r=>{if(!H.value){H.value=!0;try{let e=null;const o=localStorage.getItem("currentUser");if(o)try{const a=JSON.parse(o);a.id&&(e=a.id)}catch(a){console.error("è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:",a)}if(!e){alert("è¯·å…ˆç™»å½•åå†æ”¶è—å¸–å­");return}let l=!1;try{const{createClient:a}=await Q(()=>import("./index-31c5edd2.js"),[]),s="https://aonlahundnkxuyxfsmcy.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbmxhaHVuZG5reHV5eGZzbWN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNjYwNTUsImV4cCI6MjA3ODY0MjA1NX0.IQswPG1NkJKht83isjWJk5nzuhymzETAf81_71kXaVE";if(s&&u){const f=a(s,u);if(r.is_favorited){const{error:v}=await f.from("post_favorites").delete().eq("user_id",e).eq("post_id",r.id);if(v)throw v;r.is_favorited=!1,r.favorite_count=Math.max((r.favorite_count||0)-1,0),console.log("âœ… æ•°æ®åº“å–æ¶ˆæ”¶è—æˆåŠŸ")}else{const{error:v}=await f.from("post_favorites").insert([{user_id:e,post_id:r.id}]);if(v)throw v;r.is_favorited=!0,r.favorite_count=(r.favorite_count||0)+1,console.log("âœ… æ•°æ®åº“æ·»åŠ æ”¶è—æˆåŠŸ")}l=!0}}catch(a){console.warn("âš ï¸ æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨:",a.message),l=!1}if(!l){const a=`edumatch_favorites_${e}`;let s=JSON.parse(localStorage.getItem(a)||"[]");r.is_favorited?(s=s.filter(u=>u.post_id!==r.id),r.is_favorited=!1,r.favorite_count=Math.max((r.favorite_count||0)-1,0),console.log("âœ… æœ¬åœ°å–æ¶ˆæ”¶è—æˆåŠŸ")):(s.push({post_id:r.id,user_id:e,timestamp:Date.now()}),r.is_favorited=!0,r.favorite_count=(r.favorite_count||0)+1,console.log("âœ… æœ¬åœ°æ·»åŠ æ”¶è—æˆåŠŸ")),localStorage.setItem(a,JSON.stringify(s))}await ce(e)}catch(e){console.error("æ”¶è—æ“ä½œå¼‚å¸¸:",e),alert("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{H.value=!1}}},Ie=async r=>{N.value=!0,j.value=!0;try{const e=r.toLowerCase(),o=w.value.filter(l=>!!(l.tags&&Array.isArray(l.tags)&&l.tags.some(s=>typeof s=="string"&&s.toLowerCase().includes(e))));J.value=o,y.value=1,z(),M.value=r}catch{}finally{N.value=!1}},oe=async()=>{N.value=!0;try{let r=await h.getClient();if(r||(console.log("æ•°æ®åº“å®¢æˆ·ç«¯æœªåˆå§‹åŒ–ï¼Œå°è¯•é‡æ–°è¿æ¥..."),await h.reconnect(),r=await h.getClient()),!r){console.error("æ•°æ®åº“å®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥");return}console.log("ğŸ”„ å¼€å§‹åŠ è½½å¸–å­...");const{data:e,error:o}=await r.from("community_posts").select(`
        *,
        user:user_id (
          id,
          username,
          nickname
        )
      `).order("created_at",{ascending:!1});if(o)throw console.error("âŒ åŠ è½½å¸–å­å¤±è´¥:",o),console.error("é”™è¯¯è¯¦æƒ…:",o.details,o.hint),o;let l=null;const a=localStorage.getItem("currentUser");if(a)try{const s=JSON.parse(a);s.id&&(l=s.id)}catch(s){console.error("è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:",s)}w.value=(e||[]).map(s=>{var u,f;return{...s,author:((u=s.user)==null?void 0:u.nickname)||((f=s.user)==null?void 0:f.username)||"åŒ¿åç”¨æˆ·",is_liked:!1,is_favorited:!1,like_count:0,favorite_count:0}}),l&&(await de(l),await ue(l)),console.log("âœ… æˆåŠŸåŠ è½½å¸–å­æ•°é‡:",w.value.length),console.log("ğŸ“„ å¸–å­åˆ—è¡¨:",w.value),y.value=1,z()}catch(r){console.error("âŒ åŠ è½½å¸–å­å¼‚å¸¸:",r),O.value=!0,A.value="åŠ è½½å¸–å­å¤±è´¥ï¼š"+(r.message||"æœªçŸ¥é”™è¯¯"),w.value=[]}finally{N.value=!1}},de=async r=>{try{let e=!1,o=[];try{const{createClient:l}=await Q(()=>import("./index-31c5edd2.js"),[]),a="https://aonlahundnkxuyxfsmcy.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbmxhaHVuZG5reHV5eGZzbWN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNjYwNTUsImV4cCI6MjA3ODY0MjA1NX0.IQswPG1NkJKht83isjWJk5nzuhymzETAf81_71kXaVE";if(a&&s){const u=l(a,s);console.log("ğŸ‘ å¼€å§‹ä»æ•°æ®åº“åŠ è½½ç”¨æˆ·ç‚¹èµçŠ¶æ€...");const{data:f,error:v}=await u.from("post_likes").select("post_id").eq("user_id",r);if(v)throw v;o=f.map(le=>le.post_id),e=!0,console.log("âœ… æ•°æ®åº“ç‚¹èµçŠ¶æ€åŠ è½½å®Œæˆï¼Œå·²ç‚¹èµå¸–å­æ•°é‡:",o.length)}}catch(l){console.warn("âš ï¸ æ•°æ®åº“ç‚¹èµçŠ¶æ€åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨:",l.message),e=!1}if(!e){console.log("ğŸ”„ ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç‚¹èµçŠ¶æ€");const l=`edumatch_likes_${r}`;o=JSON.parse(localStorage.getItem(l)||"[]").map(s=>s.post_id),console.log("âœ… æœ¬åœ°å­˜å‚¨ç‚¹èµçŠ¶æ€åŠ è½½å®Œæˆï¼Œå·²ç‚¹èµå¸–å­æ•°é‡:",o.length)}w.value.forEach(l=>{l.is_liked=o.includes(l.id)}),console.log("âœ… ç‚¹èµçŠ¶æ€åŠ è½½å®Œæˆ")}catch(e){console.error("âŒ åŠ è½½ç‚¹èµçŠ¶æ€å¼‚å¸¸:",e)}},ue=async r=>{try{let e=!1,o=[];try{const{createClient:l}=await Q(()=>import("./index-31c5edd2.js"),[]),a="https://aonlahundnkxuyxfsmcy.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbmxhaHVuZG5reHV5eGZzbWN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNjYwNTUsImV4cCI6MjA3ODY0MjA1NX0.IQswPG1NkJKht83isjWJk5nzuhymzETAf81_71kXaVE";if(a&&s){const u=l(a,s);console.log("â­ å¼€å§‹ä»æ•°æ®åº“åŠ è½½ç”¨æˆ·æ”¶è—çŠ¶æ€...");const{data:f,error:v}=await u.from("post_favorites").select("post_id").eq("user_id",r);if(v)throw v;o=f.map(le=>le.post_id),e=!0,console.log("âœ… æ•°æ®åº“æ”¶è—çŠ¶æ€åŠ è½½å®Œæˆï¼Œå·²æ”¶è—å¸–å­æ•°é‡:",o.length)}}catch(l){console.warn("âš ï¸ æ•°æ®åº“æ”¶è—çŠ¶æ€åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨:",l.message),e=!1}if(!e){console.log("ğŸ”„ ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ”¶è—çŠ¶æ€");const l=`edumatch_favorites_${r}`;o=JSON.parse(localStorage.getItem(l)||"[]").map(s=>s.post_id),console.log("âœ… æœ¬åœ°å­˜å‚¨æ”¶è—çŠ¶æ€åŠ è½½å®Œæˆï¼Œå·²æ”¶è—å¸–å­æ•°é‡:",o.length)}w.value.forEach(l=>{l.is_favorited=o.includes(l.id)}),console.log("âœ… æ”¶è—çŠ¶æ€åŠ è½½å®Œæˆ")}catch(e){console.error("âŒ åŠ è½½æ”¶è—çŠ¶æ€å¼‚å¸¸:",e)}},ce=async r=>{console.log("ğŸ”„ é‡æ–°åŠ è½½å¸–å­çŠ¶æ€..."),await de(r),await ue(r),console.log("âœ… å¸–å­çŠ¶æ€é‡æ–°åŠ è½½å®Œæˆ")},Me=async()=>{O.value=!1,A.value="",y.value=1,await oe()},ge=async()=>{try{let r=await h.getClient();if(r||(console.log("æ ‡ç­¾åŠ è½½ï¼šæ•°æ®åº“å®¢æˆ·ç«¯æœªåˆå§‹åŒ–ï¼Œå°è¯•é‡æ–°è¿æ¥..."),await h.reconnect(),r=await h.getClient()),!r){console.error("æ ‡ç­¾åŠ è½½ï¼šæ•°æ®åº“å®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥");return}console.log("ğŸ·ï¸ å¼€å§‹åŠ è½½çƒ­é—¨æ ‡ç­¾...");const{data:e,error:o}=await r.from("community_posts").select("tags");if(o){console.error("âŒ åŠ è½½æ ‡ç­¾å¤±è´¥:",o);return}const l={};e==null||e.forEach(a=>{a.tags&&Array.isArray(a.tags)&&a.tags.forEach(s=>{l[s]=(l[s]||0)+1})}),G.value=Object.entries(l).map(([a,s])=>({name:a,count:s,id:a})).sort((a,s)=>s.count-a.count).slice(0,10),console.log("âœ… çƒ­é—¨æ ‡ç­¾åŠ è½½å®Œæˆ:",G.value)}catch(r){console.error("âŒ åŠ è½½æ ‡ç­¾å¼‚å¸¸:",r)}},je=async()=>{var r,e;if(!(!g.value.title.trim()||!g.value.content.trim())){B.value=!0;try{let o=await h.getClient();if(o||(console.log("åˆ›å»ºå¸–å­ï¼šæ•°æ®åº“å®¢æˆ·ç«¯æœªåˆå§‹åŒ–ï¼Œå°è¯•é‡æ–°è¿æ¥..."),await h.reconnect(),o=await h.getClient()),!o){console.error("åˆ›å»ºå¸–å­ï¼šæ•°æ®åº“å®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥");return}let l=null,a=null;const s=localStorage.getItem("currentUser");if(s)try{const v=JSON.parse(s);v.id&&(l=v.id,a=v)}catch(v){console.error("è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:",v)}if(!l){alert("è¯·å…ˆç™»å½•åå†å‘å¸ƒå¸–å­"),B.value=!1;return}console.log("ğŸ’¾ å¼€å§‹åˆ›å»ºå¸–å­ï¼Œç”¨æˆ·ID:",l,"æ•°æ®:",g.value);const{data:u,error:f}=await o.from("community_posts").insert([{title:g.value.title,content:g.value.content,category:g.value.category||"å­¦ä¹ ç»éªŒ",tags:g.value.tags,user_id:l}]).select(`
        *,
        user:user_id (
          id,
          username,
          nickname
        )
      `);if(f)throw console.error("âŒ åˆ›å»ºå¸–å­å¤±è´¥:",f),f;if(console.log("âœ… å¸–å­åˆ›å»ºæˆåŠŸ:",u),u&&u[0]){const v={...u[0],author:((r=u[0].user)==null?void 0:r.nickname)||((e=u[0].user)==null?void 0:e.username)||"åŒ¿åç”¨æˆ·",is_liked:!1,is_favorited:!1,like_count:0,favorite_count:0};w.value.unshift(v),y.value=1,z()}se(),ge()}catch(o){console.error("âŒ å‘å¸ƒå¸–å­å¼‚å¸¸:",o)}finally{B.value=!1}}},Se=r=>{const e=g.value.tags.indexOf(r);e>-1&&g.value.tags.splice(e,1)},ve=()=>{const r=T.value.trim();r&&(g.value.tags.includes(r)||g.value.tags.push(r),T.value="")},se=()=>{W.value=!1,g.value={title:"",content:"",category:"",tags:[]},T.value="",_.value=null},ze=async()=>{ee.value=!0;try{console.log("ğŸ”„ å¼€å§‹åŠ è½½ç”¨æˆ·èµ„æº..."),b.value=1,Y.value=[];let r=null;const e=localStorage.getItem("currentUser");if(e)try{const s=JSON.parse(e);s.id&&(r=s.id)}catch(s){console.error("è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:",s)}if(!r){console.log("âš ï¸ ç”¨æˆ·æœªç™»å½•"),m.value=[];return}let o=await h.getClient();if(o||(console.log("èµ„æºåŠ è½½ï¼šæ•°æ®åº“å®¢æˆ·ç«¯æœªåˆå§‹åŒ–ï¼Œå°è¯•é‡æ–°è¿æ¥..."),await h.reconnect(),o=await h.getClient()),!o){console.error("èµ„æºåŠ è½½ï¼šæ•°æ®åº“å®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥"),m.value=[];return}console.log("ğŸ” æŸ¥è¯¢ç”¨æˆ·èµ„æº...");const{data:l,error:a}=await o.from("resources").select("*").eq("created_by",r).order("created_at",{ascending:!1});if(a){console.error("âŒ è·å–æˆ‘çš„èµ„æºå¤±è´¥:",a),m.value=[];return}if(!l||l.length===0){console.log("â„¹ï¸ è¯¥ç”¨æˆ·æ²¡æœ‰åˆ›å»ºä»»ä½•èµ„æº"),m.value=[];return}m.value=l.map(s=>({id:s.id,title:s.title,description:s.description||"",type:s.type||"other",category:s.category,difficulty:s.difficulty,duration:s.duration,provider:s.provider,url:s.url,views:s.views||0,likes:s.likes||0,created_at:s.created_at})),ye(),console.log("âœ… æˆåŠŸåŠ è½½æˆ‘çš„èµ„æº:",m.value.length)}catch(r){console.error("âŒ åŠ è½½æˆ‘çš„èµ„æºæ—¶å‡ºé”™:",r),m.value=[]}finally{ee.value=!1}},ye=()=>{const r=m.value.length;k.value=Math.ceil(r/D.value),b.value>k.value&&k.value>0&&(b.value=k.value);const e=(b.value-1)*D.value,o=e+D.value;Y.value=m.value.slice(e,o),console.log(`ğŸ“„ èµ„æºåˆ†é¡µ: ç¬¬${b.value}/${k.value}é¡µï¼Œæ˜¾ç¤º${Y.value.length}ä¸ªèµ„æº`)},X=r=>{r>=1&&r<=k.value&&(b.value=r,ye())},Pe=()=>{const r=k.value,e=b.value;if(r<=5)return Array.from({length:r},(u,f)=>f+1);const o=[],l=Math.floor(5/2);let a=Math.max(1,e-l),s=Math.min(r,a+4);e<=3&&(a=1,s=5),e>=r-2&&(a=r-4,s=r);for(let u=a;u<=s;u++)o.push(u);return o},pe=()=>{const r=parseInt(I.value);if(!r||isNaN(r)){I.value="";return}if(r<1){I.value="1";return}if(r>k.value){I.value=k.value.toString();return}X(r),I.value=""},Ve=r=>{_.value=r,r.title&&(g.value.title=`åŸºäºã€Š${r.title}ã€‹çš„å­¦ä¹ ç»éªŒåˆ†äº«`),r.description&&(g.value.content=`æˆ‘åœ¨å­¦ä¹ ã€Š${r.title}ã€‹æ—¶ï¼Œæœ‰äº†ä¸€äº›å¿ƒå¾—ä½“ä¼šæƒ³å’Œå¤§å®¶åˆ†äº«ï¼š

${r.description}

é€šè¿‡è¿™ä¸ªèµ„æºï¼Œæˆ‘å­¦åˆ°äº†å¾ˆå¤šï¼Œå¸Œæœ›å¯¹å¤§å®¶ä¹Ÿæœ‰å¸®åŠ©ï¼`),r.category&&(g.value.category=r.category),r.type&&(g.value.tags.includes(r.type)||g.value.tags.push(r.type)),L.value=!1,console.log("âœ… å·²é€‰æ‹©èµ„æº:",r)},Je=()=>{_.value=null,_.value&&g.value.title.includes(`åŸºäºã€Š${_.value.title}ã€‹`)&&(g.value.title="")},Ne=r=>{const e={video:"bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400",article:"bg-green-100 text-green-600 dark:bg-green-900/20 dark:text-green-400",book:"bg-purple-100 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400",course:"bg-orange-100 text-orange-600 dark:bg-orange-900/20 dark:text-orange-400",tool:"bg-pink-100 text-pink-600 dark:bg-pink-900/20 dark:text-pink-400",other:"bg-gray-100 text-gray-600 dark:bg-gray-900/20 dark:text-gray-400"};return e[r]||e.other},Le=()=>{ne.push("/create-resource"),L.value=!1},xe=r=>{r.key==="Escape"&&j.value&&R()};return Ue(async()=>{console.log("ğŸš€ CommunityPage ç»„ä»¶æŒ‚è½½"),O.value=!1,A.value="",console.log("â³ å¼€å§‹åˆå§‹åŒ–æ•°æ®åŠ è½½...");try{h.isConnected?console.log("âœ… æ•°æ®åº“å·²è¿æ¥ï¼Œå¼€å§‹åŠ è½½æ•°æ®"):(console.log("âš ï¸ æ•°æ®åº“æœªè¿æ¥ï¼Œå°è¯•é‡æ–°è¿æ¥"),await h.reconnect()),await Promise.all([oe(),ge(),ze()]),console.log("ğŸ‰ CommunityPage åˆå§‹åŒ–å®Œæˆ")}catch(r){console.error("âŒ åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:",r),O.value=!0,A.value="åˆå§‹åŒ–å¤±è´¥ï¼š"+(r.message||"æœªçŸ¥é”™è¯¯")}finally{N.value=!1,document.addEventListener("keyup",xe)}}),Ee(()=>{document.removeEventListener("keyup",xe)}),(r,e)=>(n(),i("div",De,[t("div",Fe,[t("div",Re,[e[19]||(e[19]=ke('<div class="mb-8"><h1 class="text-3xl font-bold text-gray-900 dark:text-white flex items-center"><svg class="h-8 w-8 mr-3 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg> å­¦ä¹ ç¤¾åŒº </h1><p class="text-gray-600 dark:text-gray-400 mt-2">ä¸å­¦ä¹ ä¼™ä¼´äº¤æµï¼Œåˆ†äº«å­¦ä¹ ç»éªŒ</p></div>',1)),t("div",Xe,[t("div",Ze,[t("div",Ge,[e[15]||(e[15]=t("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"},[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),$(t("input",{type:"text",placeholder:"æœç´¢ç¤¾åŒºå†…å®¹","onUpdate:modelValue":e[0]||(e[0]=o=>M.value=o),onKeyup:[q(ie,["enter"]),q(R,["escape"])],onInput:me,class:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg outline-none text-sm"},null,544),[[Z,M.value]])]),t("button",{onClick:ie,disabled:E.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center"},[E.value?(n(),i("svg",He,[...e[16]||(e[16]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V8C6.47 4 4 5.47 4 8s-.47 4-4 4 4.47 4 4zm0 0a8 8 0 1008z"},null,-1)])])):(n(),i("span",Ye,"æœç´¢"))],8,Ke)]),j.value&&M.value?(n(),i("div",qe,[t("div",Qe,[t("span",We,' æœç´¢ "'+d(M.value)+'" çš„ç»“æœï¼š'+d(J.value.length)+" æ¡ ",1),t("button",{onClick:R,class:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200"}," æ¸…é™¤æœç´¢ ")])])):x("",!0)]),t("button",{onClick:e[1]||(e[1]=o=>W.value=!0),class:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl p-4 shadow-md transition-all duration-300 flex items-center justify-center space-x-2 font-medium"},[...e[17]||(e[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5h-1v5a1 1 0 01-1 1H6a1 1 0 01-1-1v-5H3a2 2 0 00-2-2V4a2 2 0 012-2h7m-1 4v4h8v-4m0 0V5a2 2 0 00-2-2H6a2 2 0 00-2 2v1m5-1h7a2 2 0 012 2v4a2 2 0 01-2 2h-7a2 2 0 01-2-2v-4z"})],-1),t("span",null,"å‘è¡¨æˆ‘çš„ç»éªŒ",-1)])]),t("div",et,[e[18]||(e[18]=t("h3",{class:"font-semibold mb-4 flex items-center"},[t("svg",{class:"h-4 w-4 mr-2 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]),C(" çƒ­é—¨æ ‡ç­¾ ")],-1)),G.value.length>0?(n(),i("div",tt,[(n(!0),i(S,null,V(G.value,o=>(n(),i("a",{key:o.id,href:"#",onClick:l=>Ie(o.name),class:"px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 rounded-full text-sm flex items-center transition-all duration-200 hover:scale-105 active:scale-95"},[C(d(o.name)+" ",1),t("span",ot,"("+d(o.count)+")",1)],8,rt))),128))])):(n(),i("div",st," æš‚æ— çƒ­é—¨æ ‡ç­¾ "))])]),t("div",lt,[N.value?(n(),i("div",at,[...e[20]||(e[20]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1),t("span",{class:"ml-3 text-lg text-gray-600 dark:text-gray-300"},"æ­£åœ¨åŠ è½½å¸–å­...",-1)])])):O.value?(n(),i("div",nt,[e[21]||(e[21]=t("svg",{class:"w-16 h-16 mx-auto mb-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[22]||(e[22]=t("h3",{class:"text-lg font-medium mb-2 text-red-600"},"åŠ è½½å¤±è´¥",-1)),t("p",it,d(A.value||"æ— æ³•åŠ è½½å¸–å­ï¼Œè¯·ç¨åé‡è¯•"),1),t("button",{onClick:Me,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"}," é‡æ–°åŠ è½½ ")])):j.value&&J.value.length===0?(n(),i("div",dt,[...e[23]||(e[23]=[t("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),t("h3",{class:"text-lg font-medium mb-2"},"æœªæ‰¾åˆ°ç›¸å…³å†…å®¹",-1),t("p",{class:"text-gray-500 dark:text-gray-400"},"å°è¯•ä½¿ç”¨å…¶ä»–å…³é”®è¯æœç´¢",-1)])])):!j.value&&w.value.length===0?(n(),i("div",ut,[...e[24]||(e[24]=[t("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),t("h3",{class:"text-lg font-medium mb-2 text-gray-600 dark:text-gray-400"},"æš‚æ— ç¤¾åŒºå¸–å­",-1),t("p",{class:"text-gray-500 dark:text-gray-500"},"å¿«æ¥å‘è¡¨ä½ çš„ç¬¬ä¸€ä¸ªå­¦ä¹ ç»éªŒå§ï¼",-1)])])):(n(),i("div",ct,[(n(!0),i(S,null,V(re.value,(o,l)=>(n(),i("div",{key:o.id,class:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md transition-all duration-300 hover:shadow-lg cursor-pointer group",onClick:a=>he(o.id)},[t("div",vt,[t("div",yt,[t("div",pt,[t("h3",xt,d(o.title),1),t("p",kt,d(o.content),1)]),t("div",ft,[t("button",{onClick:ae(a=>_e(o),["stop"]),disabled:K.value,class:U(["flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors disabled:opacity-50",o.is_liked?"text-red-500 bg-red-50 dark:bg-red-900/20":"bg-gray-100 dark:bg-gray-700"])},[e[25]||(e[25]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),t("span",mt,d(o.like_count||0),1)],10,bt),t("button",{onClick:ae(a=>Ce(o),["stop"]),disabled:H.value,class:U(["flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:text-yellow-500 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors disabled:opacity-50",o.is_favorited?"text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"bg-gray-100 dark:bg-gray-700"])},[e[26]||(e[26]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1)),t("span",wt,d(o.favorite_count||0),1)],10,ht)])]),t("div",_t,[t("div",Ct,[t("span",It,[e[27]||(e[27]=t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),C(" "+d(o.author||"åŒ¿åç”¨æˆ·"),1)]),t("span",Mt,[e[28]||(e[28]=t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 002.828 0l.586-.586c.391-.39.586-.902.586-1.414V15a2 2 0 01-2 2H7a2 2 0 01-2-2v-4c0-.814.195-1.523.586-1.914L7.414 5.586C7.004 5.195 6.492 5 6 5z"})],-1)),C(" "+d(o.category||"æœªåˆ†ç±»"),1)])]),t("span",null,d(we(o.created_at)),1)]),o.tags&&o.tags.length>0?(n(),i("div",jt,[(n(!0),i(S,null,V(o.tags,a=>(n(),i("span",{key:a,class:"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-xs"},d(a),1))),128))])):x("",!0)])],8,gt))),128))])),p.value>0?(n(),i("div",St,[p.value>1?(n(),i("div",zt,[t("button",{onClick:fe,disabled:y.value===1,class:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...e[29]||(e[29]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,Pt),P()[0]>1?(n(),i("button",{key:0,onClick:e[2]||(e[2]=o=>F(1)),class:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," 1 ")):x("",!0),P()[0]>2?(n(),i("span",Vt,"...")):x("",!0),(n(!0),i(S,null,V(P(),o=>(n(),i("button",{key:o,onClick:l=>F(o),class:U(["px-3 py-2 rounded-lg border transition-colors",y.value===o?"bg-blue-600 border-blue-600 text-white":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"])},d(o),11,Jt))),128)),P()[P().length-1]<p.value-1?(n(),i("span",Nt,"...")):x("",!0),P()[P().length-1]<p.value?(n(),i("button",{key:3,onClick:e[3]||(e[3]=o=>F(p.value)),class:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},d(p.value),1)):x("",!0),t("button",{onClick:be,disabled:y.value===p.value,class:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...e[30]||(e[30]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,Lt),t("div",Bt," ç¬¬ "+d(y.value)+" é¡µ / å…± "+d(p.value)+" é¡µ ",1)])):(n(),i("div",$t," ç¬¬ "+d(y.value)+" é¡µ / å…± "+d(p.value)+" é¡µ ",1))])):x("",!0)])]),W.value?(n(),i("div",Ut,[t("div",Et,[t("div",{class:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700"},[e[32]||(e[32]=t("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"},"å‘è¡¨å­¦ä¹ ç»éªŒ",-1)),t("button",{onClick:se,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...e[31]||(e[31]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:ae(je,["prevent"]),class:"p-6 space-y-4"},[t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"æ ‡é¢˜",-1)),$(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>g.value.title=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"åˆ†äº«ä½ çš„å­¦ä¹ å¿ƒå¾—..."},null,512),[[Z,g.value.title]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"å†…å®¹",-1)),$(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>g.value.content=o),rows:"6",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"è¯¦ç»†æè¿°ä½ çš„å­¦ä¹ ç»éªŒã€é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•..."},null,512),[[Z,g.value.content]]),t("div",Ot,[t("button",{type:"button",onClick:e[6]||(e[6]=o=>L.value=!0),class:"flex items-center space-x-2 px-3 py-2 bg-purple-100 dark:bg-purple-900/20 hover:bg-purple-200 dark:hover:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg text-sm transition-colors"},[...e[34]||(e[34]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),t("span",null,"ä»æˆ‘çš„èµ„æºä¸­é€‰æ‹©",-1)])])]),_.value?(n(),i("div",At,[t("div",Tt,[t("div",Dt,[e[35]||(e[35]=t("div",{class:"flex items-center gap-2 mb-1"},[t("svg",{class:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})]),t("span",{class:"text-sm font-medium text-purple-700 dark:text-purple-300"},"å·²é€‰æ‹©èµ„æº")],-1)),t("div",Ft,[t("span",Rt,d(_.value.title),1),_.value.type?(n(),i("span",Xt,d(_.value.type),1)):x("",!0)]),_.value.description?(n(),i("div",Zt,d(_.value.description),1)):x("",!0)]),t("button",{type:"button",onClick:Je,class:"ml-2 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200"},[...e[36]||(e[36]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):x("",!0)]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"åˆ†ç±»",-1)),$(t("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>g.value.category=o),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},[...e[38]||(e[38]=[ke('<option value="">é€‰æ‹©åˆ†ç±»</option><option value="å‰ç«¯å¼€å‘">å‰ç«¯å¼€å‘</option><option value="åç«¯å¼€å‘">åç«¯å¼€å‘</option><option value="ç®—æ³•ä¸æ•°æ®ç»“æ„">ç®—æ³•ä¸æ•°æ®ç»“æ„</option><option value="æ•°æ®åº“">æ•°æ®åº“</option><option value="å…¶ä»–">å…¶ä»–</option>',6)])],512),[[Oe,g.value.category]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"æ ‡ç­¾",-1)),t("div",Gt,[t("div",Kt,[(n(!0),i(S,null,V(g.value.tags,o=>(n(),i("span",{key:o,class:"px-3 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-sm flex items-center"},[C(d(o)+" ",1),t("button",{type:"button",onClick:l=>Se(o),class:"ml-2 text-blue-500 hover:text-blue-700"},[...e[40]||(e[40]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ht)]))),128))]),t("div",Yt,[$(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>T.value=o),type:"text",onKeyup:q(ve,["enter"]),class:"flex-1 px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm",placeholder:"è¾“å…¥è‡ªå®šä¹‰æ ‡ç­¾..."},null,544),[[Z,T.value]]),t("button",{type:"button",onClick:ve,class:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm"}," æ·»åŠ  ")])])]),t("div",qt,[t("button",{type:"button",onClick:se,class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg"}," å–æ¶ˆ "),t("button",{type:"submit",disabled:B.value,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white rounded-lg flex items-center"},[B.value?(n(),i("svg",Wt,[...e[42]||(e[42]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V8C6.47 4 4 5.47 4 8s-.47 4-4 4 4.47 4 4zm0 0a8 8 0 1008z"},null,-1)])])):x("",!0),C(" "+d(B.value?"å‘å¸ƒä¸­...":"å‘å¸ƒç»éªŒ"),1)],8,Qt)])],32)])])):x("",!0),L.value?(n(),i("div",er,[t("div",tr,[t("div",rr,[e[44]||(e[44]=t("h2",{class:"text-xl font-bold text-gray-900 dark:text-white flex items-center"},[t("svg",{class:"w-6 h-6 mr-2 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})]),C(" é€‰æ‹©èµ„æºè¿›è¡Œç»éªŒåˆ†äº« ")],-1)),t("button",{onClick:e[9]||(e[9]=o=>L.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...e[43]||(e[43]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",or,[ee.value?(n(),i("div",sr,[...e[45]||(e[45]=[t("div",{class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-purple-500 hover:bg-purple-400 transition ease-in-out duration-150"},[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),C(" åŠ è½½æˆ‘çš„èµ„æº... ")],-1)])])):m.value.length===0?(n(),i("div",lr,[e[46]||(e[46]=t("svg",{class:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1)),e[47]||(e[47]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"æš‚æ— èµ„æº",-1)),e[48]||(e[48]=t("p",{class:"text-gray-500 dark:text-gray-400 mb-4"},"æ‚¨è¿˜æ²¡æœ‰åˆ›å»ºä»»ä½•å­¦ä¹ èµ„æº",-1)),t("button",{onClick:Le,class:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors"}," åˆ›å»ºç¬¬ä¸€ä¸ªèµ„æº ")])):(n(),i("div",ar,[(n(!0),i(S,null,V(Y.value,o=>(n(),i("div",{key:o.id,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",onClick:l=>Ve(o)},[t("div",ir,[t("div",dr,[t("div",ur,[t("h4",cr,d(o.title),1),t("span",{class:U(`px-2 py-1 text-xs rounded-full ${Ne(o.type)}`)},d(o.type),3)]),t("p",gr,d(o.description),1)])]),t("div",vr,[o.category?(n(),i("div",yr,[e[49]||(e[49]=t("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),C(" "+d(o.category),1)])):x("",!0),o.difficulty?(n(),i("div",pr,[e[50]||(e[50]=t("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),C(" "+d(o.difficulty),1)])):x("",!0),o.duration?(n(),i("div",xr,[e[51]||(e[51]=t("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),C(" "+d(o.duration),1)])):x("",!0)])],8,nr))),128))])),m.value.length>0&&k.value>1?(n(),i("div",kr,[t("div",fr,[t("button",{onClick:e[10]||(e[10]=o=>X(b.value-1)),disabled:b.value<=1,class:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700"},[...e[52]||(e[52]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,br),t("div",mr,[(n(!0),i(S,null,V(Pe(),o=>(n(),i("button",{key:o,onClick:l=>X(o),class:U(`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${b.value===o?"bg-purple-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700"}`)},d(o),11,hr))),128))]),k.value>5?(n(),i(S,{key:0},[e[53]||(e[53]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"...",-1)),t("button",{onClick:e[11]||(e[11]=o=>X(k.value)),class:U(`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${b.value===k.value?"bg-purple-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700"}`)},d(k.value),3)],64)):x("",!0),t("button",{onClick:e[12]||(e[12]=o=>X(b.value+1)),disabled:b.value>=k.value,class:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700"},[...e[54]||(e[54]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,wr)]),t("div",_r,[e[55]||(e[55]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"è·³è½¬åˆ°é¡µé¢ï¼š",-1)),t("div",Cr,[$(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>I.value=o),onKeyup:q(pe,["enter"]),type:"number",min:1,max:k.value,class:"w-16 px-2 py-1 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300",placeholder:"é¡µç "},null,40,Ir),[[Z,I.value,void 0,{number:!0}]]),t("button",{onClick:pe,disabled:!I.value||I.value<1||I.value>k.value,class:"px-3 py-1 text-sm font-medium bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"}," è·³è½¬ ",8,Mr)]),t("span",jr,"ï¼ˆå…±"+d(k.value)+"é¡µï¼‰",1)])])):x("",!0),m.value.length>0?(n(),i("div",Sr," æ˜¾ç¤ºç¬¬ "+d((b.value-1)*D.value+1)+" - "+d(Math.min(b.value*D.value,m.value.length))+" ä¸ªèµ„æºï¼Œå…± "+d(m.value.length)+" ä¸ª ",1)):x("",!0),t("div",zr,[t("button",{type:"button",onClick:e[14]||(e[14]=o=>L.value=!1),class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg"}," å–æ¶ˆ ")])])])])):x("",!0)]))}}),Br=Ae(Pr,[["__file","E:/å‰ç«¯åˆçº§è¯¾ç¨‹/program/EduMatch/src/views/CommunityPage.vue"]]);export{Br as default};
