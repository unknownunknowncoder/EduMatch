import{_ as k,s as w,a as h,r as b,b as c,e as y,h as m,f as e,l as V,n as i,w as l,v as a,y as x,t as S,j as U}from"./index-9cc4628e.js";import{supabaseService as C}from"./supabase-7d3cd435.js";const M={class:"p-6 md:p-8"},B={class:"max-w-4xl mx-auto"},j={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},D={class:"mb-8"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N={class:"mb-8"},E={class:"space-y-6"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T={class:"flex justify-end space-x-4"},q=["disabled"],H={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-opacity duration-300"},J={__name:"CreateResource",setup(L){const g=w(),r=h({title:"",description:"",type:"",difficulty:"",duration:"",provider:"",url:"",tags:""}),d=b(!1),p=b(!1),f=async()=>{d.value=!0;try{let s=null;if(typeof window<"u"){const n=localStorage.getItem("currentUser");if(n){const u=JSON.parse(n);u&&u.id&&(s=u.id,console.log("ä½¿ç”¨å½“å‰ç™»å½•ç”¨æˆ·ID:",s))}}if(!s){alert("è¯·å…ˆç™»å½•åå†å‘å¸ƒèµ„æº"),d.value=!1;return}const t={title:r.title,description:r.description,type:r.type||"other",category:r.type,difficulty:r.difficulty,duration:r.duration,provider:r.provider,url:r.url,tags:r.tags?r.tags.split(",").map(n=>n.trim()):[],created_by:s};console.log("æäº¤èµ„æºæ•°æ®:",t);const o=await C.createResource(t);if(console.log("âœ… èµ„æºåˆ›å»ºæˆåŠŸ:",o),console.log("ğŸ“Š èµ„æºID:",o.id),!o||!o.id)throw new Error("èµ„æºåˆ›å»ºå¤±è´¥ï¼šè¿”å›æ•°æ®æ— æ•ˆ");p.value=!0,setTimeout(()=>{g.push(`/resource/${o.id}`)},2e3)}catch(s){console.error("æäº¤å¤±è´¥:",s),alert("èµ„æºåˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•: "+s.message)}finally{d.value=!1}},v=()=>{g.push("/search")};return(s,t)=>(c(),y("div",M,[t[22]||(t[22]=m('<div class="mb-8"><h1 class="text-3xl font-bold text-gray-900 dark:text-white flex items-center"><svg class="h-8 w-8 mr-3 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> åˆ›å»ºèµ„æº </h1><p class="text-gray-600 dark:text-gray-400 mt-2">åˆ›å»ºä¸ªäººå­¦ä¹ èµ„æºï¼Œä¿å­˜åˆ°ä¸ªäººä¸­å¿ƒ</p></div>',1)),e("div",B,[e("div",j,[e("form",{onSubmit:V(f,["prevent"])},[e("div",D,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center"},[e("svg",{class:"h-5 w-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),i(" åŸºæœ¬ä¿¡æ¯ ")],-1)),e("div",R,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[i(" èµ„æºæ ‡é¢˜ "),e("span",{class:"text-red-500"},"*")],-1)),l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.title=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"è¯·è¾“å…¥èµ„æºæ ‡é¢˜"},null,512),[[a,r.title]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[i(" èµ„æºç±»å‹ "),e("span",{class:"text-red-500"},"*")],-1)),l(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.type=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[...t[9]||(t[9]=[m('<option value="">è¯·é€‰æ‹©èµ„æºç±»å‹</option><option value="course">è¯¾ç¨‹</option><option value="book">ä¹¦ç±</option><option value="video">è§†é¢‘</option><option value="article">æ–‡ç« </option><option value="tool">å·¥å…·</option><option value="other">å…¶ä»–</option>',7)])],512),[[x,r.type]])])])]),e("div",N,[t[20]||(t[20]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center"},[e("svg",{class:"h-5 w-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),i(" è¯¦ç»†ä¿¡æ¯ ")],-1)),e("div",E,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," èµ„æºæè¿° ",-1)),l(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.description=o),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"è¯·è¯¦ç»†æè¿°è¿™ä¸ªèµ„æºçš„å†…å®¹å’Œç‰¹ç‚¹..."},null,512),[[a,r.description]])]),e("div",I,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," éš¾åº¦ç­‰çº§ ",-1)),l(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.difficulty=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[...t[13]||(t[13]=[e("option",{value:""},"è¯·é€‰æ‹©éš¾åº¦",-1),e("option",{value:"beginner"},"åˆçº§",-1),e("option",{value:"intermediate"},"ä¸­çº§",-1),e("option",{value:"advanced"},"é«˜çº§",-1)])],512),[[x,r.difficulty]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," å­¦ä¹ æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ ",-1)),l(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>r.duration=o),type:"number",min:"0",step:"0.5",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"é¢„è®¡å­¦ä¹ æ—¶é•¿"},null,512),[[a,r.duration,void 0,{number:!0}]])])]),e("div",z,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," æä¾›è€… ",-1)),l(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>r.provider=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"èµ„æºæä¾›è€…æˆ–æœºæ„"},null,512),[[a,r.provider]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," èµ„æºé“¾æ¥ ",-1)),l(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>r.url=o),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://..."},null,512),[[a,r.url]])])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," æ ‡ç­¾ ",-1)),l(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>r.tags=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"è¯·è¾“å…¥æ ‡ç­¾ï¼Œå¤šä¸ªæ ‡ç­¾ç”¨é€—å·åˆ†éš”"},null,512),[[a,r.tags]]),t[19]||(t[19]=e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"ä¾‹å¦‚ï¼šJavaScript, å‰ç«¯, ç¼–ç¨‹",-1))])])]),e("div",T,[e("button",{type:"button",onClick:v,class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:d.value,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},S(d.value?"åˆ›å»ºä¸­...":"åˆ›å»ºèµ„æº"),9,q)])],32)])]),p.value?(c(),y("div",H,[...t[21]||(t[21]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),i(" èµ„æºåˆ›å»ºæˆåŠŸï¼Œè¯·åœ¨'ä¸ªäººä¸­å¿ƒ-æˆ‘çš„èµ„æº'ä¸­æŸ¥çœ‹ ")],-1)])])):U("",!0)]))}},A=k(J,[["__file","E:/å‰ç«¯åˆçº§è¯¾ç¨‹/program/EduMatch/src/views/CreateResource.vue"]]);export{A as default};
