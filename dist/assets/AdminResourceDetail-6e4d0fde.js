import{d as U,D as j,s as z,r as m,o as S,b as l,e as n,u as d,n as F,f as e,t as r,g as x,F as N,j as V,z as T,_ as P}from"./index-0e60331d.js";import{s as H,g as O,m as A,a as $,b as q,c as G}from"./message-2c75333d.js";const J={class:"min-h-screen bg-gray-50"},K=["innerHTML"],Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},W={key:0,class:"text-center py-16"},X={key:1,class:"text-center py-16"},Y={class:"text-gray-600 mb-8"},Z={key:2,class:"fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-pulse"},ee={key:3,class:"space-y-8"},se={class:"bg-white rounded-lg shadow p-6"},te={class:"text-2xl font-bold text-gray-900 mb-4"},oe={class:"flex items-center justify-between mb-6"},re={class:"flex items-center space-x-4"},ae={class:"flex items-center"},le={class:"h-10 w-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold"},ne={class:"ml-3"},ue={class:"text-sm font-medium text-gray-900"},ie={class:"text-xs text-gray-500"},ce={class:"text-sm text-gray-500"},de={class:"flex items-center space-x-4"},ge={class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"},xe={class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm"},me={class:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm"},pe={key:0,class:"prose max-w-none mb-6"},ve={class:"whitespace-pre-wrap text-gray-700"},_e={class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},ye=["href"],be={class:"bg-white rounded-lg shadow p-6"},he={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},fe={class:"text-gray-700"},we={class:"text-gray-700"},ke={class:"text-gray-700"},De={key:0,class:"bg-white rounded-lg shadow p-6"},Ie={class:"flex flex-wrap gap-2"},Re=U({__name:"AdminResourceDetail",setup(Te){const v=j(),c=z(),_=v.params.id,y=v.query.user_id||null,p=m(!0),g=m(""),s=m(null),b=m(!1),h=o=>new Date(o).toLocaleString("zh-CN"),C=o=>{switch(o){case"programming":return"ç¼–ç¨‹";case"design":return"è®¾è®¡";case"language":return"è¯­è¨€å­¦ä¹ ";case"business":return"å•†ä¸š";case"science":return"ç§‘å­¦";case"technology":return"æŠ€æœ¯";default:return"å…¶ä»–"}},E=o=>{switch(o){case"video":return"è§†é¢‘";case"article":return"æ–‡ç« ";case"book":return"ä¹¦ç±";case"course":return"è¯¾ç¨‹";case"tool":return"å·¥å…·";case"website":return"ç½‘ç«™";case"documentation":return"æ–‡æ¡£";default:return"å…¶ä»–"}},f=o=>{switch(o){case"beginner":return"åˆçº§";case"intermediate":return"ä¸­çº§";case"advanced":return"é«˜çº§";case"expert":return"ä¸“å®¶çº§";default:return"æœªè®¾ç½®"}},w=async()=>{p.value=!0,g.value="";try{console.log("ğŸ”„ åŠ è½½ç®¡ç†å‘˜èµ„æºè¯¦æƒ…ï¼ŒID:",_);const{supabaseService:o}=await T(()=>import("./supabase-b4265a88.js"),["assets/supabase-b4265a88.js","assets/index-0e60331d.js","assets/index-3cf0edb8.css"]),t=await o.getResourceById(_);if(console.log("ğŸ” åŸå§‹èµ„æºæ•°æ®:",t),!t){g.value="èµ„æºä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤";return}let u=null;if(t.created_by)try{u=await o.getUserById(t.created_by)}catch(i){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",i)}const a={...t,user:u};s.value=a,console.log("âœ… èµ„æºè¯¦æƒ…åŠ è½½æˆåŠŸ:",s.value),console.log("âœ… ç”¨æˆ·IDç¡®è®¤:",s.value.user_id)}catch(o){console.error("âŒ åŠ è½½èµ„æºè¯¦æƒ…å¤±è´¥:",o),g.value="åŠ è½½èµ„æºè¯¦æƒ…å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"}finally{p.value=!1}},B=()=>{var o,t,u;console.log("ğŸ”™ ç‚¹å‡»è¿”å›æŒ‰é’®"),console.log("ğŸ” å½“å‰èµ„æºæ•°æ®:",s.value),console.log("ğŸ” ç”¨æˆ·ID:",(o=s.value)==null?void 0:o.user_id);try{const a=((t=s.value)==null?void 0:t.created_by)||y;if(a){const i=`/admin/user/${a}`;console.log("ğŸ“ è¿”å›åˆ°ç”¨æˆ·è¯¦æƒ…é¡µé¢:",i),console.log("ğŸ“ ä½¿ç”¨ç”¨æˆ·ID:",a,"(æ¥è‡ªèµ„æº:",!!((u=s.value)!=null&&u.created_by),", æ¥è‡ªURL:",!!y,")"),c.push(i);return}console.log("âŒ æ²¡æœ‰æ‰¾åˆ°ç”¨æˆ·IDï¼Œä½¿ç”¨å¤‡é€‰æ–¹æ¡ˆ"),window.history.length>1?(console.log("ğŸ“ ä½¿ç”¨ history.back() è¿”å›"),c.back()):(console.log("ğŸ“ è·³è½¬åˆ°ç®¡ç†ä¸»é¡µ"),c.push("/admin"))}catch(a){console.error("âŒ è¿”å›å¤±è´¥ï¼Œè·³è½¬åˆ°ç®¡ç†é¡µé¢:",a),c.push("/admin")}},M=()=>{var o;(o=s.value)!=null&&o.url&&window.open(s.value.url,"_blank")},L=async()=>{if(s.value&&confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªèµ„æºå—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"))try{console.log("ğŸ—‘ï¸ åˆ é™¤èµ„æºï¼ŒID:",s.value.id);const{supabaseService:o}=await T(()=>import("./supabase-b4265a88.js"),["assets/supabase-b4265a88.js","assets/index-0e60331d.js","assets/index-3cf0edb8.css"]);await o.deleteResource(s.value.id),console.log("âœ… èµ„æºåˆ é™¤æˆåŠŸ"),b.value=!0,G("èµ„æºåˆ é™¤æˆåŠŸï¼","success"),setTimeout(()=>{if(s.value.created_by){const t=`/admin/user/${s.value.created_by}`;console.log("ğŸ—‘ï¸ åˆ é™¤æˆåŠŸï¼Œè¿”å›åˆ°ç”¨æˆ·è¯¦æƒ…é¡µé¢:",t),c.push(t)}else console.log("ğŸ—‘ï¸ åˆ é™¤æˆåŠŸï¼Œè¿”å›åˆ°ç®¡ç†ä¸»é¡µ"),c.push("/admin")},1500)}catch(o){console.error("âŒ åˆ é™¤èµ„æºå¤±è´¥:",o),showNotification("åˆ é™¤èµ„æºå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","error")}};return S(()=>{w()}),(o,t)=>{var u,a,i,k,D,I;return l(),n("div",J,[d(H)?(l(),n("div",{key:0,class:F([d(O)(d(A)),"flex items-center space-x-2"])},[e("span",{innerHTML:d($)(d(A))},null,8,K),e("span",null,r(d(q)),1)],2)):x("",!0),e("header",{class:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50"},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[e("div",{class:"flex justify-between items-center h-16"},[e("div",{class:"flex items-center"},[e("button",{onClick:B,class:"mr-4 text-gray-600 hover:text-gray-900"},[...t[0]||(t[0]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t[1]||(t[1]=e("h1",{class:"text-xl font-bold text-gray-900"},"èµ„æºè¯¦æƒ…ç®¡ç†",-1))]),e("div",{class:"flex items-center"},[e("button",{onClick:L,class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"}," åˆ é™¤èµ„æº ")])])])]),e("main",Q,[p.value?(l(),n("div",W,[...t[2]||(t[2]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),e("p",{class:"text-gray-600"},"æ­£åœ¨åŠ è½½èµ„æºè¯¦æƒ…...",-1)])])):g.value?(l(),n("div",X,[t[3]||(t[3]=e("div",{class:"text-red-600 text-6xl mb-4"},"âŒ",-1)),t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-4"},"åŠ è½½å¤±è´¥",-1)),e("p",Y,r(g.value),1),e("button",{onClick:w,class:"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700"}," é‡æ–°åŠ è½½ ")])):x("",!0),b.value?(l(),n("div",Z," âœ… èµ„æºåˆ é™¤æˆåŠŸ ")):s.value?(l(),n("div",ee,[e("div",se,[e("h2",te,r(s.value.title),1),e("div",oe,[e("div",re,[e("div",ae,[e("div",le,r(((a=(u=s.value.user)==null?void 0:u.nickname)==null?void 0:a.charAt(0))||((k=(i=s.value.user)==null?void 0:i.username)==null?void 0:k.charAt(0))||"U"),1),e("div",ne,[e("p",ue,r(((D=s.value.user)==null?void 0:D.nickname)||((I=s.value.user)==null?void 0:I.username)||"æœªçŸ¥ç”¨æˆ·"),1),e("p",ie,r(s.value.created_by),1)])]),e("div",ce,[e("span",null,"åˆ›å»ºæ—¶é—´ï¼š"+r(h(s.value.created_at)),1),t[5]||(t[5]=e("span",{class:"mx-2"},"|",-1)),e("span",null,"æœ€åæ›´æ–°ï¼š"+r(h(s.value.updated_at)),1)])]),e("div",de,[e("span",ge,r(C(s.value.category)),1),e("span",xe,r(E(s.value.type)),1),e("span",me,r(f(s.value.difficulty)),1)])]),s.value.description?(l(),n("div",pe,[e("div",ve,r(s.value.description),1)])):x("",!0),e("div",_e,[t[6]||(t[6]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"èµ„æºé“¾æ¥",-1)),e("a",{href:s.value.url,target:"_blank",class:"text-blue-600 hover:text-blue-800 underline break-all"},r(s.value.url),9,ye),e("button",{onClick:M,class:"ml-4 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700"}," æ‰“å¼€èµ„æº ")])]),e("div",be,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"å­¦ä¹ ä¿¡æ¯",-1)),e("div",he,[e("div",null,[t[7]||(t[7]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"é¢„è®¡å­¦ä¹ æ—¶é•¿",-1)),e("p",fe,r(s.value.duration||"æœªè®¾ç½®"),1)]),e("div",null,[t[8]||(t[8]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"éš¾åº¦ç­‰çº§",-1)),e("p",we,r(f(s.value.difficulty)),1)]),e("div",null,[t[9]||(t[9]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"æä¾›è€…",-1)),e("p",ke,r(s.value.provider||"æœªè®¾ç½®"),1)])])]),s.value.tags&&s.value.tags.length>0?(l(),n("div",De,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"æ ‡ç­¾",-1)),e("div",Ie,[(l(!0),n(N,null,V(s.value.tags,R=>(l(),n("span",{key:R,class:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm"}," #"+r(R),1))),128))])])):x("",!0)])):x("",!0)])])}}});const Ee=P(Re,[["__file","E:/å‰ç«¯åˆçº§è¯¾ç¨‹/program/EduMatch/src/views/AdminResourceDetail.vue"]]);export{Ee as default};
