import{_ as h,s as V,a as M,r as C,b as m,e as c,i as y,f as e,l as U,p as u,w as a,v as l,y as x,t as f,u as d,n as S,g as T}from"./index-0e60331d.js";import{supabaseService as B}from"./supabase-b4265a88.js";import{s as D,g as R,m as v,a as I,b as N,c as p}from"./message-2c75333d.js";const j={class:"p-6 md:p-8"},E={class:"max-w-4xl mx-auto"},H={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},z={class:"mb-8"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J={class:"mb-8"},L={class:"space-y-6"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},A={class:"flex justify-end space-x-4"},F=["disabled"],G=["innerHTML"],K={__name:"CreateResource",setup(P){const b=V(),t=M({title:"",description:"",type:"",difficulty:"",duration:"",provider:"",url:"",tags:""}),i=C(!1),k=async()=>{i.value=!0;try{let s=null;if(typeof window<"u"){const n=localStorage.getItem("currentUser");if(n){const g=JSON.parse(n);g&&g.id&&(s=g.id,console.log("ä½¿ç”¨å½“å‰ç™»å½•ç”¨æˆ·ID:",s))}}if(!s){p("è¯·å…ˆç™»å½•åå†å‘å¸ƒèµ„æº","warning"),i.value=!1;return}const r={title:t.title,description:t.description,type:t.type||"other",category:t.type,difficulty:t.difficulty,duration:t.duration,provider:t.provider,url:t.url,tags:t.tags?t.tags.split(",").map(n=>n.trim()):[],created_by:s};console.log("æäº¤èµ„æºæ•°æ®:",r);const o=await B.createResource(r);if(console.log("âœ… èµ„æºåˆ›å»ºæˆåŠŸ:",o),console.log("ğŸ“Š èµ„æºID:",o.id),!o||!o.id)throw new Error("èµ„æºåˆ›å»ºå¤±è´¥ï¼šè¿”å›æ•°æ®æ— æ•ˆ");p("èµ„æºåˆ›å»ºæˆåŠŸï¼Œè¯·åœ¨'ä¸ªäººä¸­å¿ƒ-æˆ‘çš„èµ„æº'ä¸­æŸ¥çœ‹","success"),setTimeout(()=>{b.push(`/resource/${o.id}`)},2e3)}catch(s){console.error("æäº¤å¤±è´¥:",s),p("èµ„æºåˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•: "+s.message,"error")}finally{i.value=!1}},w=()=>{b.push("/search")};return(s,r)=>(m(),c("div",j,[r[21]||(r[21]=y('<div class="mb-8"><h1 class="text-3xl font-bold text-gray-900 dark:text-white flex items-center"><svg class="h-8 w-8 mr-3 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> åˆ›å»ºèµ„æº </h1><p class="text-gray-600 dark:text-gray-400 mt-2">åˆ›å»ºä¸ªäººå­¦ä¹ èµ„æºï¼Œä¿å­˜åˆ°ä¸ªäººä¸­å¿ƒ</p></div>',1)),e("div",E,[e("div",H,[e("form",{onSubmit:U(k,["prevent"])},[e("div",z,[r[11]||(r[11]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center"},[e("svg",{class:"h-5 w-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),u(" åŸºæœ¬ä¿¡æ¯ ")],-1)),e("div",q,[e("div",null,[r[8]||(r[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[u(" èµ„æºæ ‡é¢˜ "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>t.title=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"è¯·è¾“å…¥èµ„æºæ ‡é¢˜"},null,512),[[l,t.title]])]),e("div",null,[r[10]||(r[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[u(" èµ„æºç±»å‹ "),e("span",{class:"text-red-500"},"*")],-1)),a(e("select",{"onUpdate:modelValue":r[1]||(r[1]=o=>t.type=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[...r[9]||(r[9]=[y('<option value="">è¯·é€‰æ‹©èµ„æºç±»å‹</option><option value="course">è¯¾ç¨‹</option><option value="book">ä¹¦ç±</option><option value="video">è§†é¢‘</option><option value="article">æ–‡ç« </option><option value="tool">å·¥å…·</option><option value="other">å…¶ä»–</option>',7)])],512),[[x,t.type]])])])]),e("div",J,[r[20]||(r[20]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center"},[e("svg",{class:"h-5 w-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),u(" è¯¦ç»†ä¿¡æ¯ ")],-1)),e("div",L,[e("div",null,[r[12]||(r[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," èµ„æºæè¿° ",-1)),a(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=o=>t.description=o),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"è¯·è¯¦ç»†æè¿°è¿™ä¸ªèµ„æºçš„å†…å®¹å’Œç‰¹ç‚¹..."},null,512),[[l,t.description]])]),e("div",O,[e("div",null,[r[14]||(r[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," éš¾åº¦ç­‰çº§ ",-1)),a(e("select",{"onUpdate:modelValue":r[3]||(r[3]=o=>t.difficulty=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"},[...r[13]||(r[13]=[e("option",{value:""},"è¯·é€‰æ‹©éš¾åº¦",-1),e("option",{value:"beginner"},"åˆçº§",-1),e("option",{value:"intermediate"},"ä¸­çº§",-1),e("option",{value:"advanced"},"é«˜çº§",-1)])],512),[[x,t.difficulty]])]),e("div",null,[r[15]||(r[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," å­¦ä¹ æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ ",-1)),a(e("input",{"onUpdate:modelValue":r[4]||(r[4]=o=>t.duration=o),type:"number",min:"0",step:"0.5",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"é¢„è®¡å­¦ä¹ æ—¶é•¿"},null,512),[[l,t.duration,void 0,{number:!0}]])])]),e("div",$,[e("div",null,[r[16]||(r[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," æä¾›è€… ",-1)),a(e("input",{"onUpdate:modelValue":r[5]||(r[5]=o=>t.provider=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"èµ„æºæä¾›è€…æˆ–æœºæ„"},null,512),[[l,t.provider]])]),e("div",null,[r[17]||(r[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," èµ„æºé“¾æ¥ ",-1)),a(e("input",{"onUpdate:modelValue":r[6]||(r[6]=o=>t.url=o),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://..."},null,512),[[l,t.url]])])]),e("div",null,[r[18]||(r[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," æ ‡ç­¾ ",-1)),a(e("input",{"onUpdate:modelValue":r[7]||(r[7]=o=>t.tags=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"è¯·è¾“å…¥æ ‡ç­¾ï¼Œå¤šä¸ªæ ‡ç­¾ç”¨é€—å·åˆ†éš”"},null,512),[[l,t.tags]]),r[19]||(r[19]=e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"ä¾‹å¦‚ï¼šJavaScript, å‰ç«¯, ç¼–ç¨‹",-1))])])]),e("div",A,[e("button",{type:"button",onClick:w,class:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"}," å–æ¶ˆ "),e("button",{type:"submit",disabled:i.value,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},f(i.value?"åˆ›å»ºä¸­...":"åˆ›å»ºèµ„æº"),9,F)])],32)])]),d(D)?(m(),c("div",{key:0,class:S([d(R)(d(v)),"flex items-center space-x-2"])},[e("span",{innerHTML:d(I)(d(v))},null,8,G),e("span",null,f(d(N)),1)],2)):T("",!0)]))}},Y=h(K,[["__file","E:/å‰ç«¯åˆçº§è¯¾ç¨‹/program/EduMatch/src/views/CreateResource.vue"]]);export{Y as default};
