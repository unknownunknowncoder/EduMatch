var T=Object.defineProperty;var M=(h,s,o)=>s in h?T(h,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):h[s]=o;var w=(h,s,o)=>(M(h,typeof s!="symbol"?s+"":s,o),o);import{c as O,d as A,r as y,o as P,a as d,b as c,e as t,t as l,f as B,_ as S,u as $,g as b,h as E,i as x,j as p,w as V,v as j,k as N,l as v,F as R,m as J,n as U,C as z}from"./index-f8367010.js";import{S as K}from"./search-853977b4.js";import{S as L,L as Y}from"./sparkles-b23f3ca6.js";import{B as I}from"./book-open-103438f5.js";/**
 * @license lucide-vue-next v0.420.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=O("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);class q{constructor(){w(this,"apiToken");w(this,"botId");this.apiToken="cztei_qd3JtYr0VKZsXmgLsX09rKZG3DIII6SSgUu4k7v2x6YyM9fuWN7YCJUUb1ssX1Ygk",this.botId="7573579561607331840",console.log("Coze APIé…ç½®:",{hasToken:!!this.apiToken,hasBotId:!!this.botId,note:"é€šè¿‡ä»£ç†æœåŠ¡å™¨è°ƒç”¨æ‰£å­API"})}getUserId(){let s=localStorage.getItem("coze_user_id");return s||(s="user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("coze_user_id",s)),s}async searchRecommendations(s){console.log("ğŸ” å¼€å§‹æœç´¢æ‰£å­API:",s);const o=await fetch("http://localhost:3014/api/coze/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:s.query,bot_id:this.botId,user_id:this.getUserId()})});if(console.log("ğŸ“Š ä»£ç†è¯·æ±‚çŠ¶æ€:",{status:o.status,ok:o.ok}),o.ok){const r=await o.json();if(console.log("âœ… ä»£ç†å“åº”æˆåŠŸ:",{success:r.success}),r.success&&r.data)return this.parseCozeResponse(r.data);throw new Error(r.error||"APIè°ƒç”¨å¤±è´¥")}else{const r=await o.text();throw console.error("âŒ ä»£ç†å“åº”é”™è¯¯:",o.status,r),new Error(`ä»£ç†æœåŠ¡å™¨é”™è¯¯: ${o.status}`)}}parseCozeResponse(s){console.log("ğŸ” è§£ææ‰£å­APIå“åº”:",s);let o="";if(s.messages&&s.messages.length>0?o=s.messages[s.messages.length-1].content||"":s.content?o=s.content:typeof s=="string"&&(o=s),console.log("ğŸ“ æå–çš„å†…å®¹:",o),!o)throw new Error("æ— æ³•ä»APIå“åº”ä¸­æå–å†…å®¹");return this.parseRecommendations(o)}parseRecommendations(s){console.log("ğŸ” è§£ææ¨èå†…å®¹:",s);const o={top_recommendation:{name:"",platform:"Bç«™",reason:"æš‚æ— æ¨è",duration:"å¾…ç¡®è®¤",study_data:"æš‚æ— æ•°æ®"},other_recommendations:[],learning_advice:"å»ºè®®ç»“åˆç†è®ºå­¦ä¹ å’Œå®é™…æ“ä½œï¼Œåˆ¶å®šåˆç†çš„å­¦ä¹ è®¡åˆ’ã€‚"};try{const r=s.match(/\{[\s\S]*\}/);if(r)try{const i=JSON.parse(r[0]);return console.log("âœ… JSONè§£ææˆåŠŸ:",i),i.top_recommendation&&(o.top_recommendation={name:i.top_recommendation.name||"",platform:i.top_recommendation.platform||"Bç«™",reason:i.top_recommendation.reason||"",duration:i.top_recommendation.duration||"å¾…ç¡®è®¤",study_data:i.top_recommendation.study_data||"æš‚æ— æ•°æ®"}),i.other_recommendations&&Array.isArray(i.other_recommendations)&&(o.other_recommendations=i.other_recommendations.slice(0,3).map(g=>({name:g.name||"",platform:g.platform||"Bç«™",reason:g.reason||"",duration:g.duration||"å¾…ç¡®è®¤",study_data:g.study_data||"æš‚æ— æ•°æ®"}))),i.learning_advice&&(o.learning_advice=i.learning_advice),console.log("âœ… JSONè§£æç»“æœ:",o),o}catch(i){console.log("âŒ JSONè§£æå¤±è´¥ï¼Œå°è¯•æ–‡æœ¬è§£æ:",i.message)}const a=s.match(/ğŸ¯\s*æœ€æ¨è[ï¼š:]\s*([^\r\n]+)/i);a&&(o.top_recommendation.name=a[1].trim());const u=s.match(/ğŸ“š\s*å…¶ä»–æ¨è[ï¼š:]\s*([\s\S]*?)(?=ğŸ’¡|$)/i);if(u){const g=u[1].match(/-\s*([^-]+)-\s*([^-]+)-\s*([^-]+)/g);g&&(o.other_recommendations=g.map((m,e)=>{var _;const n=m.split("-").map(k=>k.trim()).filter(k=>k);return{name:n[0]||`æ¨èèµ„æº${e+1}`,platform:(_=n[1])!=null&&_.includes("MOOC")?"ä¸­å›½å¤§å­¦MOOCå®˜ç½‘":"Bç«™",reason:"æ™ºèƒ½æ¨èèµ„æº",duration:"å¾…ç¡®è®¤",study_data:"æ¨è"}}).slice(0,3))}const f=s.match(/ğŸ’¡\s*å­¦ä¹ å»ºè®®[ï¼š:]\s*([^\r\n]+)/i);f&&(o.learning_advice=f[1].trim())}catch(r){throw console.error("âŒ è§£ææ¨èå†…å®¹å¤±è´¥:",r),new Error(`è§£ææ¨èå†…å®¹å¤±è´¥: ${r.message}`)}return console.log("âœ… æœ€ç»ˆè§£æç»“æœ:",o),o}getConfigStatus(){const s=[];return this.apiToken||s.push("API Token"),this.botId||s.push("Bot ID"),{configured:s.length===0,missing:s}}}const C=new q,D={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md"},H={key:0,class:"text-green-600 dark:text-green-400 mb-4"},X={key:1,class:"text-red-600 dark:text-red-400 mb-4"},F={class:"mt-4 text-xs text-gray-500 dark:text-gray-400"},G={class:"list-disc list-inside"},Q=A({__name:"CozeConfigTest",setup(h){const s=y({configured:!1,missing:[]}),o=y(""),r=y("");return P(()=>{s.value=C.getConfigStatus(),o.value="å·²é…ç½®",r.value="å·²é…ç½®"}),(a,u)=>(d(),c("div",D,[u[1]||(u[1]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"æ‰£å­APIé…ç½®æ£€æŸ¥",-1)),s.value.configured?(d(),c("div",H," âœ… æ‰£å­APIé…ç½®æ­£ç¡®ï¼Œå¯ä»¥ä½¿ç”¨AIæ¨èåŠŸèƒ½ ")):(d(),c("div",X," âŒ æ‰£å­APIé…ç½®ä¸å®Œæ•´ï¼Œç¼ºå°‘ï¼š"+l(s.value.missing.join("ã€")),1)),u[2]||(u[2]=B('<div class="bg-gray-100 dark:bg-gray-700 rounded p-4 text-sm"><h4 class="font-semibold mb-2">é…ç½®è¯´æ˜ï¼š</h4><ol class="list-decimal list-inside space-y-1 text-gray-700 dark:text-gray-300"><li>å¤åˆ¶ <code class="bg-gray-200 dark:bg-gray-600 px-1 rounded">.env.example</code> ä¸º <code class="bg-gray-200 dark:bg-gray-600 px-1 rounded">.env.local</code></li><li>å¡«å…¥æ‰£å­API Tokenå’ŒBot ID</li><li>é‡å¯å¼€å‘æœåŠ¡ <code class="bg-gray-200 dark:bg-gray-600 px-1 rounded">npm run dev</code></li><li>åˆ·æ–°é¡µé¢é‡æ–°æ£€æŸ¥é…ç½®</li></ol></div>',1)),t("div",F,[u[0]||(u[0]=t("p",null,"ç¯å¢ƒå˜é‡ï¼š",-1)),t("ul",G,[t("li",null,"VITE_COZE_API_TOKEN: "+l(o.value?"å·²è®¾ç½®":"æœªè®¾ç½®"),1),t("li",null,"VITE_COZE_BOT_ID: "+l(r.value?"å·²è®¾ç½®":"æœªè®¾ç½®"),1)])])]))}}),W=S(Q,[["__file","D:/education resource/EduMatch/src/components/CozeConfigTest.vue"]]),tt={class:"p-6 md:p-8"},et={class:"mb-12"},st={class:"max-w-3xl mx-auto"},ot={class:"relative"},rt=["disabled"],at={key:1,id:"ai-search-results",class:"mb-12"},nt={class:"max-w-6xl mx-auto"},lt={key:0,class:"mb-8"},it={class:"flex items-center mb-4"},dt={class:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-700"},ct={class:"grid md:grid-cols-2 gap-6"},mt={class:"text-xl font-bold text-gray-900 dark:text-white mb-2"},ut={class:"text-gray-600 dark:text-gray-300 mb-4"},gt={class:"space-y-2 text-sm"},bt={key:0},xt={key:1},ht={class:"flex items-center justify-center"},pt={key:1,class:"mb-8"},_t={class:"flex items-center mb-4"},vt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},yt=["onClick"],ft={class:"p-6"},kt={class:"flex items-center justify-between mb-3"},wt={class:"text-sm text-gray-500 dark:text-gray-400"},It={class:"font-bold text-lg text-gray-900 dark:text-white mb-2 line-clamp-2"},Ct={class:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2"},At={class:"flex items-center justify-between text-sm"},St={class:"text-gray-500 dark:text-gray-400"},Tt={key:0,class:"text-blue-500 hover:text-blue-600 text-xs"},Mt={key:2,class:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-700"},Ot={class:"flex items-center mb-3"},Pt={class:"text-gray-700 dark:text-gray-300 leading-relaxed"},Bt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},$t={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-default"},Et={class:"flex items-center mb-4"},Vt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-default"},jt={class:"flex items-center mb-4"},Nt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-default"},Rt={class:"flex items-center mb-4"},Jt={key:2,class:"mb-8"},Ut={class:"flex justify-between items-center mb-6"},zt={class:"text-center py-12"},Kt=A({__name:"Home",setup(h){const s=$(),o=y(""),r=y(!1),a=y(null),u=!0,f=m=>{s.push(m)},i=async()=>{const m=o.value.trim();if(!m||r.value)return;const e=C.getConfigStatus();if(!e.configured){alert(`æ‰£å­APIé…ç½®ä¸å®Œæ•´ï¼Œç¼ºå°‘ï¼š${e.missing.join("ã€")}`);return}r.value=!0;try{console.log("ğŸ” å¼€å§‹æœç´¢:",m);const n=await C.searchResources({query:m});console.log("ğŸ“Š æœç´¢ç»“æœ:",n),a.value=n,setTimeout(()=>{const _=document.getElementById("ai-search-results");_&&_.scrollIntoView({behavior:"smooth"})},100)}catch(n){console.error("âŒ AIæ¨èå¤±è´¥:",n),alert(`AIæ¨èå¤±è´¥: ${n.message||"è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPIé…ç½®"}`)}finally{r.value=!1}},g=m=>{m.platform==="Bç«™"&&m.bv_number?window.open(`https://www.bilibili.com/video/${m.bv_number}`,"_blank"):m.platform==="ä¸­å›½å¤§å­¦MOOCå®˜ç½‘"&&window.open("https://www.icourse163.org/","_blank")};return(m,e)=>(d(),c("div",tt,[b(u)?(d(),E(W,{key:0,class:"mb-8"})):x("",!0),e[21]||(e[21]=t("div",{class:"text-center mb-12"},[t("h1",{class:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4"}," å­¦é…æ™ºè”å¹³å° "),t("p",{class:"text-lg text-gray-600 dark:text-gray-400"}," æ™ºèƒ½åŒ¹é…æ‚¨çš„å­¦ä¹ éœ€æ±‚ï¼Œå‘ç°æœ€é€‚åˆçš„å­¦ä¹ èµ„æº ")],-1)),t("div",et,[t("div",st,[t("div",ot,[p(b(K),{class:"absolute left-5 top-1/2 transform -translate-y-1/2 h-6 w-6 text-gray-400"}),V(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.value=n),onKeyup:N(i,["enter"]),type:"text",placeholder:"æœç´¢æ‚¨æ„Ÿå…´è¶£çš„å­¦ä¹ èµ„æºã€è¯¾ç¨‹ã€æ–‡ç« ...",class:"w-full pl-14 pr-20 py-4 text-lg bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 hover:border-gray-400 dark:hover:border-gray-500 transition-all duration-300 shadow-lg hover:shadow-xl"},null,544),[[j,o.value]]),t("button",{onClick:i,disabled:!o.value.trim()||r.value,class:"absolute right-2 top-1/2 transform -translate-y-1/2 px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm font-medium"},l(r.value?"AIæ¨èä¸­...":"AIæ¨è"),9,rt)]),e[3]||(e[3]=t("p",{class:"text-center mt-4 text-gray-500 dark:text-gray-400"}," ğŸ” è¾“å…¥å…³é”®è¯ï¼ŒAIæ™ºèƒ½åŒ¹é…æœ€é€‚åˆæ‚¨çš„å­¦ä¹ èµ„æº ",-1))])]),a.value?(d(),c("div",at,[t("div",nt,[a.value.top_recommendation?(d(),c("div",lt,[t("div",it,[p(b(L),{class:"h-6 w-6 text-blue-500 mr-2"}),e[4]||(e[4]=t("h3",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"AI æœ€æ¨è",-1))]),t("div",dt,[t("div",ct,[t("div",null,[t("h4",mt,l(a.value.top_recommendation.name),1),t("p",ut,l(a.value.top_recommendation.reason),1),t("div",gt,[t("div",null,[e[5]||(e[5]=t("span",{class:"font-semibold"},"å¹³å°ï¼š",-1)),v(l(a.value.top_recommendation.platform),1)]),t("div",null,[e[6]||(e[6]=t("span",{class:"font-semibold"},"éš¾åº¦ï¼š",-1)),v(l(a.value.top_recommendation.difficulty),1)]),t("div",null,[e[7]||(e[7]=t("span",{class:"font-semibold"},"æ—¶é•¿ï¼š",-1)),v(l(a.value.top_recommendation.duration),1)]),t("div",null,[e[8]||(e[8]=t("span",{class:"font-semibold"},"å­¦ä¹ æ•°æ®ï¼š",-1)),v(l(a.value.top_recommendation.study_data),1)]),a.value.top_recommendation.institution?(d(),c("div",bt,[e[9]||(e[9]=t("span",{class:"font-semibold"},"æœºæ„/UPä¸»ï¼š",-1)),v(l(a.value.top_recommendation.institution),1)])):x("",!0),a.value.top_recommendation.bv_number?(d(),c("div",xt,[e[10]||(e[10]=t("span",{class:"font-semibold"},"BVå·ï¼š",-1)),v(l(a.value.top_recommendation.bv_number),1)])):x("",!0)])]),t("div",ht,[t("button",{onClick:e[1]||(e[1]=n=>g(a.value.top_recommendation)),class:"px-8 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors font-medium"}," ç«‹å³å­¦ä¹  ")])])])])):x("",!0),a.value.other_recommendations.length>0?(d(),c("div",pt,[t("div",_t,[p(b(I),{class:"h-6 w-6 text-green-500 mr-2"}),e[11]||(e[11]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"å…¶ä»–æ¨è",-1))]),t("div",vt,[(d(!0),c(R,null,J(a.value.other_recommendations,(n,_)=>(d(),c("div",{key:_,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all cursor-pointer border border-gray-200 dark:border-gray-700",onClick:k=>g(n)},[t("div",ft,[t("div",kt,[t("span",{class:U(`px-2 py-1 text-xs font-semibold rounded ${n.platform==="ä¸­å›½å¤§å­¦MOOCå®˜ç½‘"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"}`)},l(n.platform),3),t("div",wt,l(n.study_data),1)]),t("h4",It,l(n.name),1),t("p",Ct,l(n.brief_description),1),t("div",At,[t("div",St,l(n.difficulty)+" Â· "+l(n.duration),1),n.bv_number?(d(),c("div",Tt," BV: "+l(n.bv_number),1)):x("",!0)])])],8,yt))),128))])])):x("",!0),a.value.learning_advice?(d(),c("div",Mt,[t("div",Ot,[p(b(Y),{class:"h-6 w-6 text-green-500 mr-2"}),e[12]||(e[12]=t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white"},"AI å­¦ä¹ å»ºè®®",-1))]),t("p",Pt,l(a.value.learning_advice),1)])):x("",!0)])])):x("",!0),t("div",Bt,[t("div",$t,[t("div",Et,[p(b(I),{class:"h-8 w-8 text-blue-500 mr-3"}),e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"æ™ºèƒ½åŒ¹é…",-1))]),e[14]||(e[14]=t("p",{class:"text-gray-600 dark:text-gray-400 text-sm"}," åŸºäºAIç®—æ³•ç²¾å‡†æ¨èæœ€é€‚åˆæ‚¨çš„å­¦ä¹ èµ„æºï¼Œè®©å­¦ä¹ æ›´é«˜æ•ˆ ",-1))]),t("div",Vt,[t("div",jt,[p(b(z),{class:"h-8 w-8 text-green-500 mr-3"}),e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"æµ·é‡èµ„æº",-1))]),e[16]||(e[16]=t("p",{class:"text-gray-600 dark:text-gray-400 text-sm"}," æ¶µç›–å„é¢†åŸŸçš„ä¼˜è´¨å­¦ä¹ èµ„æ–™ï¼Œä»åŸºç¡€å…¥é—¨åˆ°é«˜çº§è¿›é˜¶å…¨è¦†ç›– ",-1))]),t("div",Nt,[t("div",Rt,[p(b(Z),{class:"h-8 w-8 text-orange-500 mr-3"}),e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"ç¤¾åŒºäº’åŠ¨",-1))]),e[18]||(e[18]=t("p",{class:"text-gray-600 dark:text-gray-400 text-sm"}," ä¸å­¦ä¹ è€…äº¤æµåˆ†äº«ï¼Œåœ¨äº’åŠ©ç¤¾åŒºä¸­å…±åŒæˆé•¿è¿›æ­¥ ",-1))])]),a.value?x("",!0):(d(),c("div",Jt,[t("div",Ut,[e[19]||(e[19]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"æ¨èèµ„æº",-1)),t("button",{onClick:e[2]||(e[2]=n=>f("/search")),class:"text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300"}," æŸ¥çœ‹å…¨éƒ¨ ")]),t("div",zt,[p(b(I),{class:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e[20]||(e[20]=t("p",{class:"text-gray-500 dark:text-gray-400"},"æš‚æ— æ¨èèµ„æºï¼Œè¯·ä½¿ç”¨ä¸Šæ–¹æœç´¢æ¡†è·å–AIæ¨è",-1))])]))]))}}),Ht=S(Kt,[["__file","D:/education resource/EduMatch/src/views/Home.vue"]]);export{Ht as default};
