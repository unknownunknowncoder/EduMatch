import{d as W,D as ee,s as te,r as _,A as N,o as oe,b as c,e as d,u as w,n as C,f as o,t as n,g as h,p as z,i as A,w as se,v as re,F as P,j as T,z as I,_ as le}from"./index-0e60331d.js";import{useDatabaseStore as ae}from"./database-6609ebe8.js";import{s as ie,g as ne,m as L,a as ce,b as de,c as U}from"./message-2c75333d.js";import"./supabase-b4265a88.js";const ue={class:"min-h-screen bg-[#F3F4F6] font-sans text-slate-800 py-8"},ve=["innerHTML"],me={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},_e={class:"mb-6"},ge={key:0,class:"bg-white rounded-2xl shadow-md p-8 mb-8"},fe={class:"flex items-center justify-between mb-6"},he={class:"text-3xl font-bold text-slate-900 mb-2"},pe={class:"flex items-center gap-4 text-sm text-slate-500"},xe={class:"flex items-center gap-1"},be={class:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium"},we={class:"flex items-center space-x-3"},ke=["disabled"],ye={class:"text-sm font-medium"},Ce=["disabled"],Ie={class:"text-sm font-medium"},Me={class:"text-sm font-medium"},Se={class:"prose prose-lg max-w-none text-slate-700 leading-relaxed"},De={class:"whitespace-pre-wrap"},ze={key:0,class:"mt-8 p-6 bg-indigo-50/80 border border-indigo-100 rounded-2xl"},Ue={class:"flex items-center justify-between gap-4"},je={class:"text-sm font-semibold text-indigo-900"},Ee={class:"text-xs text-indigo-500 mt-1"},Ne={class:"text-sm text-slate-600 mt-3 whitespace-pre-wrap"},Pe=["href"],Te={key:1,class:"mt-8 p-6 bg-gray-50/80 border border-gray-200 rounded-2xl"},Ve={class:"bg-white rounded-2xl shadow-md p-8",id:"comments-section"},Be={class:"flex items-center justify-between mb-6"},Je={class:"text-2xl font-bold text-slate-900 flex items-center gap-2"},Ae={class:"text-sm text-slate-500"},Le={class:"mb-8 p-6 bg-slate-50 rounded-xl"},Oe={class:"flex justify-end mt-3"},Fe=["disabled"],Re={key:0,class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},$e={key:0,class:"space-y-4"},Ge={key:1,class:"space-y-6"},Xe={class:"flex-shrink-0"},Ze=["onClick"],qe=["src","alt"],Ye={class:"flex-1 min-w-0"},He={class:"flex items-center gap-2 mb-2"},Ke=["onClick"],Qe={class:"text-sm text-slate-500"},We={class:"text-slate-700 leading-relaxed whitespace-pre-wrap"},et={key:0,class:"text-center py-16"},tt={key:1,class:"flex items-center justify-center gap-4 pt-6 border-t border-slate-200"},ot=["disabled"],st={class:"flex items-center gap-1"},rt=["onClick"],lt=["disabled"],at=W({__name:"PostDetail",setup(it){const O=ee(),M=te(),g=O.params.id,l=_(null),j=_([]),p=_(""),S=_(!1),D=_(!1),k=_(!1),u=_(1),y=_(10),x=_(0),E=_(!1),b=ae(),m=N(()=>Math.ceil(x.value/y.value)),F=N(()=>{const e=(u.value-1)*y.value,t=e+y.value;return j.value.slice(e,t)}),R=N(()=>{const e=[];if(m.value<=5)for(let s=1;s<=m.value;s++)e.push(s);else if(u.value<=3)for(let s=1;s<=5;s++)e.push(s);else if(u.value>=m.value-2)for(let s=m.value-4;s<=m.value;s++)e.push(s);else for(let s=u.value-2;s<=u.value+2;s++)e.push(s);return e}),$=()=>{u.value>1&&(u.value--,window.scrollTo({top:0,behavior:"smooth"}))},G=()=>{u.value<m.value&&(u.value++,window.scrollTo({top:0,behavior:"smooth"}))},X=e=>{e>=1&&e<=m.value&&(u.value=e,window.scrollTo({top:0,behavior:"smooth"}))},Z=()=>{const e=document.getElementById("comments-section");e&&e.scrollIntoView({behavior:"smooth"})},V=e=>{const t=new Date(e);return t.toLocaleDateString("zh-CN")+" "+t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},q=async e=>{if(!S.value){S.value=!0;try{let t=null;const s=localStorage.getItem("currentUser");if(s)try{const r=JSON.parse(s);r.id&&(t=r.id.toString())}catch(r){console.error("è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:",r)}if(!t){M.push("/login");return}let i=null;try{const{createClient:r}=await I(()=>import("./index-31c5edd2.js"),[]),v="https://aonlahundnkxuyxfsmcy.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbmxhaHVuZG5reHV5eGZzbWN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNjYwNTUsImV4cCI6MjA3ODY0MjA1NX0.IQswPG1NkJKht83isjWJk5nzuhymzETAf81_71kXaVE";v&&a&&(i=r(v,a),console.log("âœ… æ•°æ®åº“å®¢æˆ·ç«¯åˆ›å»ºæˆåŠŸ"))}catch(r){console.error("âŒ æ•°æ®åº“è¿æ¥å¤±è´¥:",r.message),U("æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","error");return}if(e.is_liked){console.log("ğŸ—‘ï¸ å–æ¶ˆç‚¹èµ:",e.id);const{error:r}=await i.from("post_likes").delete().eq("user_id",t).eq("post_id",e.id);if(r)if(console.error("âŒ å–æ¶ˆç‚¹èµå¤±è´¥:",r),r.code==="PGRST116"||r.message.includes("No rows"))console.log("âš ï¸ è®°å½•ä¸å­˜åœ¨ï¼Œå¯èƒ½å·²è¢«åˆ é™¤");else throw r;else console.log("âœ… å–æ¶ˆç‚¹èµæˆåŠŸ");e.is_liked=!1,e.like_count=Math.max((e.like_count||0)-1,0)}else{console.log("â¤ï¸ æ·»åŠ ç‚¹èµ:",e.id);const{error:r}=await i.from("post_likes").upsert([{user_id:t,post_id:e.id}],{onConflict:"user_id,post_id"});if(r)throw console.error("âŒ æ·»åŠ ç‚¹èµå¤±è´¥:",r),r;console.log("âœ… æ·»åŠ ç‚¹èµæˆåŠŸ"),e.is_liked=!0,e.like_count=(e.like_count||0)+1}console.log("ğŸ“Š æ›´æ–°åçš„ç‚¹èµæ•°:",e.like_count)}catch(t){console.error("âŒ ç‚¹èµæ“ä½œå¤±è´¥:",t),U("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","error"),e.is_liked=!e.is_liked,e.like_count=e.is_liked?(e.like_count||0)-1:(e.like_count||0)+1}finally{S.value=!1}}},Y=async e=>{if(!D.value){D.value=!0;try{let t=null;const s=localStorage.getItem("currentUser");if(s)try{const r=JSON.parse(s);r.id&&(t=r.id.toString())}catch(r){console.error("è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:",r)}if(!t){M.push("/login");return}let i=null;try{const{createClient:r}=await I(()=>import("./index-31c5edd2.js"),[]),v="https://aonlahundnkxuyxfsmcy.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFvbmxhaHVuZG5reHV5eGZzbWN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNjYwNTUsImV4cCI6MjA3ODY0MjA1NX0.IQswPG1NkJKht83isjWJk5nzuhymzETAf81_71kXaVE";v&&a&&(i=r(v,a),console.log("âœ… æ•°æ®åº“å®¢æˆ·ç«¯åˆ›å»ºæˆåŠŸ"))}catch(r){console.error("âŒ æ•°æ®åº“è¿æ¥å¤±è´¥:",r.message),U("æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","error");return}if(e.is_favorited){console.log("ğŸ—‘ï¸ å–æ¶ˆæ”¶è—:",e.id);const{error:r}=await i.from("post_favorites").delete().eq("user_id",t).eq("post_id",e.id);if(r)if(console.error("âŒ å–æ¶ˆæ”¶è—å¤±è´¥:",r),r.code==="PGRST116"||r.message.includes("No rows"))console.log("âš ï¸ è®°å½•ä¸å­˜åœ¨ï¼Œå¯èƒ½å·²è¢«åˆ é™¤");else throw r;else console.log("âœ… å–æ¶ˆæ”¶è—æˆåŠŸ");e.is_favorited=!1,e.favorite_count=Math.max((e.favorite_count||0)-1,0)}else{console.log("â­ æ·»åŠ æ”¶è—:",e.id);const{error:r}=await i.from("post_favorites").upsert([{user_id:t,post_id:e.id}],{onConflict:"user_id,post_id"});if(r)throw console.error("âŒ æ·»åŠ æ”¶è—å¤±è´¥:",r),r;console.log("âœ… æ·»åŠ æ”¶è—æˆåŠŸ"),e.is_favorited=!0,e.favorite_count=(e.favorite_count||0)+1}console.log("ğŸ“Š æ›´æ–°åçš„æ”¶è—æ•°:",e.favorite_count)}catch(t){console.error("âŒ æ”¶è—æ“ä½œå¤±è´¥:",t),U("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","error"),e.is_favorited=!e.is_favorited,e.favorite_count=e.is_favorited?(e.favorite_count||0)-1:(e.favorite_count||0)+1}finally{D.value=!1}}},H=async()=>{try{console.log("ğŸ“– å¼€å§‹åŠ è½½å¸–å­è¯¦æƒ…ï¼ŒID:",g);const{supabaseService:e}=await I(()=>import("./supabase-b4265a88.js"),["assets/supabase-b4265a88.js","assets/index-0e60331d.js","assets/index-3cf0edb8.css"]),t=await e.getPostById(g);if(!t){console.error("âŒ å¸–å­æœªæ‰¾åˆ°:",g);return}console.log("âœ… å¸–å­æ•°æ®åŠ è½½æˆåŠŸ:",t);let s=null;if(t.user_id)try{const{supabaseService:a}=await I(()=>import("./supabase-b4265a88.js"),["assets/supabase-b4265a88.js","assets/index-0e60331d.js","assets/index-3cf0edb8.css"]);s=await a.getUserById(t.user_id)}catch(a){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",a)}let i=null;const r=localStorage.getItem("currentUser");if(r)try{const a=JSON.parse(r);a.id&&(i=a.id)}catch(a){console.error("è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:",a)}let v=!1;if(i)try{const{supabaseService:a}=await I(()=>import("./supabase-b4265a88.js"),["assets/supabase-b4265a88.js","assets/index-0e60331d.js","assets/index-3cf0edb8.css"]),{data:f}=await a.getClient().from("post_favorites").select("id").eq("user_id",i).eq("post_id",g);f&&f.length>0&&(v=!0)}catch(a){console.error("æ£€æŸ¥æ”¶è—çŠ¶æ€å¤±è´¥:",a)}l.value={...t,author_name:(s==null?void 0:s.nickname)||(s==null?void 0:s.username)||"åŒ¿åç”¨æˆ·",user:s,is_favorited:v,favorite_count:t.favorite_count||0,resource:t.resource||null},console.log("âœ… å¸–å­è¯¦æƒ…åŠ è½½æˆåŠŸ:",l.value),await B()}catch(e){console.error("âŒ è·å–å¸–å­è¯¦æƒ…å¤±è´¥:",e)}},B=async()=>{E.value=!0;try{let e=await b.getClient();if(e||(console.log("è¯„è®ºåŠ è½½ï¼šæ•°æ®åº“å®¢æˆ·ç«¯æœªåˆå§‹åŒ–ï¼Œå°è¯•é‡æ–°è¿æ¥..."),await b.reconnect(),e=await b.getClient()),!e){console.error("è¯„è®ºåŠ è½½ï¼šæ•°æ®åº“å®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥");return}console.log("ğŸ’¬ å¼€å§‹åŠ è½½è¯„è®ºï¼Œå¸–å­ID:",g);const{count:t,error:s}=await e.from("post_comments").select("*",{count:"exact",head:!0}).eq("post_id",g);s?console.error("âŒ è·å–è¯„è®ºæ€»æ•°å¤±è´¥:",s):x.value=t||0;const{data:i,error:r}=await e.from("post_comments").select(`
        *,
        user:user_id (
          id,
          username,
          nickname
        )
      `).eq("post_id",g).order("created_at",{ascending:!1}).range((u.value-1)*y.value,u.value*y.value-1);if(r){console.error("âŒ åŠ è½½è¯„è®ºå¤±è´¥:",r);return}j.value=(i||[]).map(v=>{var a,f;return{...v,author_name:((a=v.user)==null?void 0:a.nickname)||((f=v.user)==null?void 0:f.username)||"åŒ¿åç”¨æˆ·"}}),console.log("âœ… è¯„è®ºåŠ è½½å®Œæˆï¼Œæ€»æ•°:",x.value,"å½“å‰é¡µæ˜¾ç¤º:",j.value.length)}catch(e){console.error("âŒ åŠ è½½è¯„è®ºå¤±è´¥:",e)}finally{E.value=!1}},K=(e,t)=>{const s="#DBEAFE",i="#2563EB",r=t?t.charAt(0).toUpperCase():"U",v=`
    <svg width="40" height="40" xmlns="http://www.w3.org/2000/svg">
      <circle cx="20" cy="20" r="20" fill="${s}"/>
      <text x="20" y="26" text-anchor="middle" fill="${i}" font-family="Arial, sans-serif" font-size="16" font-weight="bold">
        ${r}
      </text>
    </svg>
  `.trim();return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(v)))},Q=async()=>{if(p.value.trim()){k.value=!0;try{let e=null,t=null,s="å½“å‰ç”¨æˆ·";const i=localStorage.getItem("currentUser");if(i)try{e=JSON.parse(i),e.id&&(t=e.id,s=e.nickname||e.username||"å½“å‰ç”¨æˆ·")}catch(f){console.error("è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:",f)}if(!t)return;console.log("ğŸ’¬ å¼€å§‹å‘è¡¨è¯„è®ºï¼Œå¸–å­ID:",g,"ç”¨æˆ·ID:",t);let r=await b.getClient();if(r||(console.log("å‘è¡¨è¯„è®ºï¼šæ•°æ®åº“å®¢æˆ·ç«¯æœªåˆå§‹åŒ–ï¼Œå°è¯•é‡æ–°è¿æ¥..."),await b.reconnect(),r=await b.getClient()),!r){console.error("å‘è¡¨è¯„è®ºï¼šæ•°æ®åº“å®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥");return}const{data:v,error:a}=await r.from("post_comments").insert([{post_id:g,user_id:t,content:p.value.trim()}]).select();if(a){console.error("âŒ å‘è¡¨è¯„è®ºå¤±è´¥:",a);return}await B(),l.value&&(l.value.comment_count=(l.value.comment_count||0)+1),p.value="",console.log("âœ… è¯„è®ºå‘è¡¨æˆåŠŸ")}catch(e){console.error("âŒ å‘è¡¨è¯„è®ºå¤±è´¥:",e)}finally{k.value=!1}}},J=e=>{if(!e)return;JSON.parse(localStorage.getItem("currentUser")||"{}").id===e?M.push("/profile"):M.push(`/user/${e}`)};return oe(()=>{H()}),(e,t)=>(c(),d("div",ue,[w(ie)?(c(),d("div",{key:0,class:C([w(ne)(w(L)),"flex items-center space-x-2"])},[o("span",{innerHTML:w(ce)(w(L))},null,8,ve),o("span",null,n(w(de)),1)],2)):h("",!0),o("div",me,[o("div",_e,[o("button",{onClick:t[0]||(t[0]=s=>e.$router.back()),class:"flex items-center text-slate-500 hover:text-indigo-600 transition-colors text-sm font-medium"},[...t[4]||(t[4]=[o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),z(" è¿”å›å­¦ä¹ ç¤¾åŒº ",-1)])])]),l.value?(c(),d("div",ge,[o("div",fe,[o("div",null,[o("h1",he,n(l.value.title),1),o("div",pe,[o("span",xe,[t[5]||(t[5]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),z(" "+n(l.value.author_name||"åŒ¿åç”¨æˆ·"),1)]),t[6]||(t[6]=o("span",null,"Â·",-1)),o("span",null,n(V(l.value.created_at)),1),t[7]||(t[7]=o("span",null,"Â·",-1)),o("span",be,n(l.value.category||"æœªåˆ†ç±»"),1)])]),o("div",we,[o("button",{onClick:t[1]||(t[1]=s=>q(l.value)),disabled:S.value,class:C(["flex items-center space-x-1.5 px-3 py-2 rounded-full text-gray-500 hover:text-red-500 hover:bg-red-50 transition-colors disabled:opacity-50",l.value.is_liked?"text-red-500 bg-red-50":"bg-gray-100"])},[(c(),d("svg",{class:C(["w-5 h-5",{"fill-current":l.value.is_liked}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[8]||(t[8]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])],2)),o("span",ye,n(l.value.like_count||0),1)],10,ke),o("button",{onClick:t[2]||(t[2]=s=>Y(l.value)),disabled:D.value,class:C(["flex items-center space-x-1.5 px-3 py-2 rounded-full text-gray-500 hover:text-yellow-500 hover:bg-yellow-50 transition-colors disabled:opacity-50",l.value.is_favorited?"text-yellow-500 bg-yellow-50":"bg-gray-100"])},[t[9]||(t[9]=o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1)),o("span",Ie,n(l.value.favorite_count||0),1)],10,Ce),o("button",{onClick:Z,class:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors bg-gray-100 dark:bg-gray-700"},[t[10]||(t[10]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),o("span",Me,n(x.value),1)])])]),o("div",Se,[o("p",De,n(l.value.content),1)]),l.value.resource?(c(),d("div",ze,[o("div",Ue,[o("div",null,[o("p",je,n(l.value.resource.title),1),o("p",Ee,n(l.value.resource.category||"æœªåˆ†ç±»"),1),o("p",Ne,n(l.value.resource.description||"è¯¥èµ„æºæš‚æ— æè¿°"),1)]),l.value.resource.url?(c(),d("a",{key:0,href:l.value.resource.url,target:"_blank",rel:"noopener noreferrer",class:"text-sm font-semibold text-indigo-600 hover:text-indigo-800 whitespace-nowrap"}," æŸ¥çœ‹èµ„æº ",8,Pe)):h("",!0)])])):l.value.resource_id&&!l.value.resource?(c(),d("div",Te,[...t[11]||(t[11]=[A('<div class="flex items-center gap-3" data-v-88a31469><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-88a31469><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-88a31469></path></svg><div data-v-88a31469><p class="text-sm font-medium text-gray-600" data-v-88a31469>å‘å¸ƒè€…å·²åˆ é™¤</p><p class="text-xs text-gray-500 mt-1" data-v-88a31469>è¯¥å¸–å­å…³è”çš„å­¦ä¹ èµ„æºå·²è¢«å‘å¸ƒè€…åˆ é™¤</p></div></div>',1)])])):h("",!0)])):h("",!0),o("div",Ve,[o("div",Be,[o("h2",Je,[t[12]||(t[12]=o("svg",{class:"w-6 h-6 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),z(" å…¨éƒ¨è¯„è®º ("+n(x.value)+") ",1)]),o("div",Ae," å…± "+n(m.value)+" é¡µ ",1)]),o("div",Le,[se(o("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),placeholder:"åˆ†äº«ä½ çš„æƒ³æ³•...",rows:"3",class:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none resize-none transition-all"},null,512),[[re,p.value]]),o("div",Oe,[o("button",{onClick:Q,disabled:!p.value.trim()||k.value,class:"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[k.value?(c(),d("svg",Re,[...t[13]||(t[13]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):h("",!0),z(" "+n(k.value?"å‘å¸ƒä¸­...":"å‘è¡¨è¯„è®º"),1)],8,Fe)])]),E.value?(c(),d("div",$e,[(c(),d(P,null,T(3,s=>o("div",{key:s,class:"animate-pulse"},[...t[14]||(t[14]=[A('<div class="flex gap-3" data-v-88a31469><div class="w-10 h-10 rounded-full bg-slate-200" data-v-88a31469></div><div class="flex-1" data-v-88a31469><div class="h-4 bg-slate-200 w-32 rounded mb-2" data-v-88a31469></div><div class="h-3 bg-slate-200 w-full rounded mb-1" data-v-88a31469></div><div class="h-3 bg-slate-200 w-3/4 rounded" data-v-88a31469></div></div></div>',1)])])),64))])):(c(),d("div",Ge,[(c(!0),d(P,null,T(F.value,s=>(c(),d("div",{key:s.id,class:"flex gap-4 p-6 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors"},[o("div",Xe,[o("button",{onClick:i=>J(s.user_id),class:"flex-shrink-0 group"},[o("img",{src:K(s.user_id,s.author_name),alt:s.author_name||"åŒ¿åç”¨æˆ·",class:"w-10 h-10 rounded-full border-2 border-white shadow-sm group-hover:ring-2 group-hover:ring-blue-500 transition-all cursor-pointer"},null,8,qe)],8,Ze)]),o("div",Ye,[o("div",He,[o("button",{onClick:i=>J(s.user_id),class:"font-medium text-slate-900 hover:text-blue-600 transition-colors"},n(s.author_name||"åŒ¿åç”¨æˆ·"),9,Ke),o("span",Qe,n(V(s.created_at)),1)]),o("div",We,n(s.content),1)])]))),128)),x.value===0?(c(),d("div",et,[...t[15]||(t[15]=[o("svg",{class:"w-16 h-16 mx-auto mb-4 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),o("h3",{class:"text-lg font-medium text-slate-900 mb-2"},"è¿˜æ²¡æœ‰è¯„è®º",-1),o("p",{class:"text-slate-500"},"å¿«æ¥å‘è¡¨ç¬¬ä¸€æ¡è¯„è®ºå§ï¼",-1)])])):h("",!0),m.value>1?(c(),d("div",tt,[o("button",{onClick:$,disabled:u.value===1,class:"p-2 rounded-lg border border-slate-200 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-slate-600 transition-colors"},[...t[16]||(t[16]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,ot),o("div",st,[(c(!0),d(P,null,T(R.value,s=>(c(),d("button",{key:s,onClick:i=>X(s),class:C(["px-3 py-2 rounded-lg text-sm font-medium transition-colors",u.value===s?"bg-indigo-600 text-white":"border border-slate-200 text-slate-600 hover:bg-white"])},n(s),11,rt))),128))]),o("button",{onClick:G,disabled:u.value===m.value,class:"p-2 rounded-lg border border-slate-200 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed text-slate-600 transition-colors"},[...t[17]||(t[17]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,lt)])):h("",!0)]))])])]))}});const vt=le(at,[["__scopeId","data-v-88a31469"],["__file","E:/å‰ç«¯åˆçº§è¯¾ç¨‹/program/EduMatch/src/views/PostDetail.vue"]]);export{vt as default};
